import{d as w,r,a as h,b,e as t,w as d,l as p,m as g,n as y,t as _,s as c,k as x}from"./supabase-B2Fa-ywg.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                   */function m(){const e=new URL(window.location.href).searchParams.get("next")||"/";return!e.startsWith("/")||e.includes("://")||e.startsWith("//")?"/":e}const P={class:"container"},B={class:"card auth-card"},C={class:"form-group"},E={class:"form-group"},U={class:"auth-actions"},L=["disabled"],V=["disabled"],W={id:"error",class:"auth-error",role:"alert","aria-live":"polite"},A=w({__name:"login-page",setup(v){const e=r(""),l=r(""),s=r(""),o=r(!1);async function u(){s.value="";const n=e.value.trim();if(!n||!l.value){s.value="请输入邮箱和密码";return}o.value=!0;try{const{error:a}=await c.auth.signInWithPassword({email:n,password:l.value});if(a)throw a;window.location.href=m()}catch(a){s.value=(a==null?void 0:a.message)||"登录失败"}finally{o.value=!1}}async function f(){s.value="";const n=e.value.trim();if(!n||!l.value){s.value="请输入邮箱和密码";return}o.value=!0;try{const{error:a}=await c.auth.signUp({email:n,password:l.value});if(a)throw a;window.location.href=m()}catch(a){s.value=(a==null?void 0:a.message)||"注册失败"}finally{o.value=!1}}return(n,a)=>(b(),h("div",P,[t("main",null,[t("section",B,[a[6]||(a[6]=t("h2",null,"登录",-1)),t("div",C,[a[2]||(a[2]=t("label",{for:"email"},"邮箱",-1)),d(t("input",{id:"email","onUpdate:modelValue":a[0]||(a[0]=i=>e.value=i),type:"email",autocomplete:"email",placeholder:"name@example.com"},null,512),[[p,e.value]])]),t("div",E,[a[3]||(a[3]=t("label",{for:"password"},"密码",-1)),d(t("input",{id:"password","onUpdate:modelValue":a[1]||(a[1]=i=>l.value=i),type:"password",autocomplete:"current-password",placeholder:"输入密码",onKeydown:g(u,["enter"])},null,544),[[p,l.value]])]),t("div",U,[t("button",{id:"loginBtn",class:y(["primary-btn",{loading:o.value}]),type:"button",disabled:o.value,onClick:u},[...a[4]||(a[4]=[t("span",{class:"btn-text"},"登录",-1),t("span",{class:"loader"},null,-1)])],10,L),t("button",{class:"btn btn-secondary",type:"button",disabled:o.value,onClick:f}," 注册 ",8,V),a[5]||(a[5]=t("a",{class:"meta-text",href:"/",style:{"text-decoration":"none"}},"返回首页",-1))]),t("div",W,_(s.value),1),a[7]||(a[7]=t("div",{class:"auth-meta"}," 使用 Supabase Auth（Email/Password）登录。 ",-1))])])]))}}),D=k(A,[["__scopeId","data-v-bb46f7d6"]]);x(D).mount("#app");
