import{d as Xe,a as n,b as i,n as k,e as t,s as Y,l as te,q as b,f as d,u as he,t as a,T as Je,x as V,w as p,v as xt,m as F,r as c,c as S,y as Ne,o as Ct,g as ee,F as C,p as T,z as Ee,k as M,i as H,A as ye,B as Tt,C as $t,j as St}from"./runtime-dom.esm-bundler-D9CM_geE.js";/* empty css                        */const Bt=["aria-expanded","onKeydown"],Ut={class:"collapsible-title"},Pt={class:"collapsible-title-text"},Mt={key:0,class:"collapsible-summary"},Vt={class:"collapsible-actions"},zt={class:"collapsible-body"},be=Xe({__name:"CollapsibleGroup",props:{title:{},summary:{},open:{type:Boolean}},emits:["toggle"],setup(G,{emit:we}){const B=we;function L(){B("toggle")}return(v,se)=>(i(),n("div",{class:k(["collapsible-group",{collapsed:!G.open}])},[t("div",{class:"collapsible-header",role:"button",tabindex:"0","aria-expanded":G.open,onClick:L,onKeydown:[te(b(L,["prevent"]),["enter"]),te(b(L,["prevent"]),["space"])]},[t("div",Ut,[t("span",Pt,a(G.title),1),he(v.$slots,"title-extra")]),G.open?d("",!0):(i(),n("div",Mt,[he(v.$slots,"summary",{},()=>[t("span",null,a(G.summary),1)])])),t("div",Vt,[he(v.$slots,"actions"),se[0]||(se[0]=t("span",{class:"collapsible-toggle"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})])],-1))])],40,Bt),Y(Je,{name:"collapse"},{default:V(()=>[p(t("div",zt,[he(v.$slots,"default")],512),[[xt,G.open]])]),_:3})],2))}}),It={class:"ecommerce-image-page"},Kt={class:"wizard-nav"},jt={class:"wizard-steps"},Et=["aria-current","aria-disabled","onClick"],At={class:"wizard-step-indicator"},Lt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Ot={key:1},Dt={class:"wizard-step-label"},Rt={key:0,class:"wizard-step-hint"},Ft={class:"main-container"},Ht={class:"sidebar"},Gt={class:"sidebar-section"},Nt={class:"form-group",style:{"margin-top":"16px"}},qt={class:"form-group"},Xt={class:"sidebar-section"},Jt={class:"search-wrapper"},Yt={key:0,class:"product-list"},Zt=["onClick"],Qt=["src","alt"],Wt={class:"product-info"},es={class:"product-name"},ts={class:"product-meta"},ss={key:1,class:"product-list-empty"},ls={key:2,class:"product-list-loading"},ns={key:3,class:"pagination"},is=["disabled"],os={class:"page-info"},as=["disabled"],rs={key:0,class:"sidebar-section"},ds={class:"section-title"},us={key:0,class:"image-grid"},cs=["onClick"],ps=["src"],vs={key:0,class:"image-check"},ms={key:1,class:"image-primary"},gs={key:1,class:"no-images"},fs={class:"main-content"},hs={key:0,class:"workflow-section"},ys={class:"content-panel"},bs={class:"panel-header"},ks={key:0,class:"panel-hint"},ws={key:0,class:"product-fields"},_s={class:"field-row"},xs={class:"field-checkbox"},Cs=["disabled"],Ts={class:"field-row"},$s={class:"field-checkbox"},Ss=["disabled"],Bs={class:"field-row"},Us={class:"field-checkbox"},Ps=["disabled"],Ms={class:"field-row"},Vs={class:"field-checkbox"},zs=["disabled"],Is={key:1,class:"panel-empty"},Ks={key:1,class:"workflow-section"},js={class:"content-panel"},Es={class:"template-modules"},As={class:"option-chips"},Ls=["onClick"],Os=["onUpdate:modelValue","data-option-id","onKeydown"],Ds=["onClick"],Rs=["onClick"],Fs={class:"option-chips"},Hs=["onClick"],Gs=["onUpdate:modelValue","data-option-id","onKeydown"],Ns=["onClick"],qs=["onClick"],Xs={class:"option-chips"},Js=["onClick"],Ys=["onUpdate:modelValue","data-option-id","onKeydown"],Zs=["onClick"],Qs=["onClick"],Ws={class:"target-type-selector"},el={class:"target-type-options"},tl=["value","onChange"],sl={class:"target-type-label"},ll={key:0,class:"target-description-input"},nl=["placeholder"],il={key:1,class:"target-loading"},ol={class:"template-editor"},al={class:"template-editor-section"},rl={key:2,class:"workflow-section"},dl={class:"content-panel prompt-preview-panel"},ul={class:"panel-header"},cl={key:0,class:"panel-hint"},pl={class:"prompt-structured"},vl={class:"prompt-row"},ml={key:1,class:"prompt-empty"},gl={class:"prompt-row"},fl={key:1,class:"prompt-empty"},hl={class:"prompt-row"},yl={key:1,class:"prompt-empty"},bl={class:"prompt-row"},kl={key:1,class:"prompt-empty"},wl={class:"prompt-row"},_l={key:0,class:"prompt-chip target-chip"},xl={key:0,class:"target-chip-name"},Cl={key:1,class:"prompt-empty"},Tl={class:"prompt-full"},$l={class:"prompt-full-header"},Sl=["disabled"],Bl={class:"prompt-full-body"},Ul={key:0},Pl={key:1,class:"prompt-placeholder"},Ml={key:3,class:"workflow-section"},Vl={class:"content-panel"},zl={class:"panel-header"},Il={key:0,class:"panel-hint"},Kl={class:"result-area"},jl={key:0,class:"result-placeholder"},El={key:1,class:"loading-state"},Al={key:2,class:"result-container"},Ll=["src"],Ol={class:"generate-section"},Dl=["disabled"],Rl={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fl={key:1,class:"spinner-small"},Hl={key:0,class:"generate-hint"},Gl={class:"preview-panel"},Nl={class:"preview-card"},ql={class:"preview-card-header"},Xl={key:0,class:"preview-card-hint"},Jl={class:"preview-card-body"},Yl={key:0},Zl={key:1,class:"preview-placeholder"},Ql={class:"preview-card"},Wl={class:"preview-card-body preview-result"},en={key:0,class:"preview-loading"},tn={key:1},sn=["src"],ln={key:2,class:"preview-placeholder"},nn={class:"toast-container"},qe="高清产品摄影",ke=10,on=Xe({__name:"ecommerce-image-page",setup(G){const we=[{id:"target-main",name:"主图",placeholder:"请描述主图的展示重点，如产品摆放方式、突出的卖点...",default_template:"适合电商主图展示的产品图，突出产品整体外观，简洁大方",sort_order:0},{id:"target-detail",name:"详情页",placeholder:"请描述详情页需要展示的产品细节或使用场景...",default_template:"适合详情页的产品展示图，展现产品细节和使用场景",sort_order:1},{id:"target-poster",name:"海报",placeholder:"请描述海报的主题和风格，如促销活动、节日氛围...",default_template:"具有视觉冲击力的营销海报风格，适合活动推广",sort_order:2},{id:"target-white",name:"白底图",placeholder:"请描述白底图的拍摄角度和展示方式...",default_template:"纯白色背景的产品图，适合平台商品展示",sort_order:3},{id:"target-scene",name:"场景图",placeholder:"请描述期望的使用场景和环境氛围...",default_template:"产品在真实使用场景中的展示图，增强代入感",sort_order:4}],B={scene:[{id:"scene-white",label:"白色背景"},{id:"scene-natural-table",label:"自然光桌面"},{id:"scene-outdoor",label:"户外场景"},{id:"scene-solid",label:"纯色背景"},{id:"scene-life",label:"生活场景"}],angle:[{id:"angle-front",label:"正面"},{id:"angle-45",label:"45度侧面"},{id:"angle-top",label:"俯视"},{id:"angle-eye",label:"平视"},{id:"angle-close",label:"特写"}],style:[{id:"style-soft",label:"柔和光影"},{id:"style-contrast",label:"高对比度"},{id:"style-natural",label:"自然光"},{id:"style-studio",label:"专业棚拍"},{id:"style-warm",label:"暖色调"}],target:[{id:"target-main",label:"主图"},{id:"target-detail",label:"详情页"},{id:"target-poster",label:"海报"},{id:"target-white",label:"白底图"},{id:"target-scene",label:"场景图"}]},L=F({apiKey:"",baseUrl:""}),v=F({model:"gemini-3-pro-image-preview",aspectRatio:"",imageSize:"1K"}),se=[{id:1,title:"选择产品"},{id:2,title:"配置模板"},{id:3,title:"预览提示词"},{id:4,title:"生成图片"}],z=c(1),Z=c(""),le=c([]),ne=c(!1),ie=c(""),I=c(1),_e=c(0),K=c(null),U=c([]),w=c([]),m=F({name:"",dimensions:"",featuresText:"",characteristicsText:""}),Q=c([]),xe=c(!1),j=c(null),P=c(""),W=S(()=>j.value&&Q.value.find(l=>l.id===j.value)||null),Ye=S(()=>{var l;return((l=W.value)==null?void 0:l.placeholder)||"请描述您期望的生成效果..."}),g=F({name:!0,dimensions:!0,features:!0,characteristics:!0}),u=F({scene:B.scene.map(l=>({...l})),angle:B.angle.map(l=>({...l})),style:B.style.map(l=>({...l})),target:B.target.map(l=>({...l}))}),y=F({scene:[],angle:[],style:[],target:[]}),O=F({scene:!0,angle:!1,style:!1,target:!1}),oe=c(!1),f=F({category:"",id:""}),D=c(qe),$=c(!1),E=c(""),X=c(""),ae=c([]),Ce=S(()=>Math.ceil(_e.value/ke));function Te(l){return globalThis.crypto&&"randomUUID"in globalThis.crypto?`${l}-${globalThis.crypto.randomUUID()}`:`${l}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function Ae(l){return l.split(`
`).map(e=>e.trim()).filter(Boolean)}function Le(l){return l.filter(Boolean).join("、")}function re(l){const e=new Set(y[l]);return u[l].filter(s=>e.has(s.id)).map(s=>s.label.trim()).filter(Boolean)}function A(l,e){return f.category===l&&f.id===e}const N=S(()=>({scene:re("scene"),angle:re("angle"),style:re("style"),target:re("target")})),Ze=S(()=>y.scene.length>0||y.angle.length>0||y.style.length>0||!!j.value);function $e(l){const e=N.value[l];return e.length?e.length<=2?e.join("、"):`${e[0]}、${e[1]} 等${e.length}项`:"未选择"}function de(l){O[l]=!O[l],oe.value=!0}function Se(l=!1){if(oe.value&&!l)return;const e=["scene","angle","style","target"];let s=!1;e.forEach(o=>{!s&&y[o].length===0?(O[o]=!0,s=!0):O[o]=!1}),oe.value=!1}const Be=S(()=>{const l=[],e=m.name.trim(),s=m.dimensions.trim();return g.name&&e&&l.push(e),g.dimensions&&s&&l.push(s),g.features&&l.push(...Ae(m.featuresText)),g.characteristics&&l.push(...Ae(m.characteristicsText)),l}),x=S(()=>({product:Be.value,scene:N.value.scene,angle:N.value.angle,style:N.value.style,target:P.value?[P.value]:[]}));function Ue(l,e){return e.length?`${l}：${Le(e)}`:""}function Oe(l){return l.replace(/[，、]{2,}/g,"，").replace(/^[，、\s]+/,"").replace(/[，、\s]+$/,"").replace(/\s*[，、]\s*/g,"，").trim()}function Pe(l){if(!l)return"";const e=l.trim();if(!e.includes("{{"))return e;const s=e.replace(/\{\{(\w+)(?:\|([^}]*))?\}\}/g,(o,r,h)=>h??"");return Oe(s)}const _=S(()=>{if(!K.value)return"";const l=[];Be.value.length&&l.push(Le(Be.value));const e=Ue("场景",N.value.scene);e&&l.push(e);const s=Ue("拍摄角度",N.value.angle);s&&l.push(s);const o=Ue("风格",N.value.style);o&&l.push(o);const r=P.value.trim();r&&l.push(r);const h=Pe(D.value);return h&&l.push(h),Oe(l.join("，"))}),De=S(()=>K.value&&w.value.length>0&&_.value.length>0),ue=S(()=>$.value?"正在生成图片...":K.value?w.value.length===0?"请选择至少一张参考图片":_.value?"":"请完善模板选项或产品信息":"请先在左侧选择产品");function R(l){return l===1?!!K.value&&w.value.length>0:l===2?Ze.value:l===3?_.value.length>0:l===4?E.value.length>0:!1}const Re=S(()=>R(1)?R(2)?R(3)?4:3:2:1);function Me(l){return l<=Re.value}function Qe(){return R(1)?R(2)?R(3)?"请先完成前置步骤":"请先完成步骤3：完善提示词预览":"请先完成步骤2：至少选择一个模板选项":"请先完成步骤1：选择产品并勾选参考图"}function We(l){if(Me(l)){z.value=l,Z.value="";return}Z.value=Qe()}function et(){const l=document.cookie.match(/csrf_token=([^;]+)/);return l?l[1]:""}function tt(l){return String(l||"").trim().replace(/^bearer\s+/i,"").trim()}function st(l){return String(l||"").trim()||null}function Fe(l){if(!l||typeof l!="object")return null;if(Array.isArray(l.data)&&l.data[0]){const e=l.data[0];if(e!=null&&e.url)return e.url;if(e!=null&&e.b64_json)return`data:image/png;base64,${e.b64_json}`}return l.url?l.url:l.b64_json?`data:image/png;base64,${l.b64_json}`:l.image_url?l.image_url:null}async function ce(){ne.value=!0;try{const l=new URLSearchParams({offset:String((I.value-1)*ke),limit:String(ke)});ie.value&&l.set("name",ie.value);const e=await fetch(`/api/v1/products?${l}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch products");const s=await e.json();le.value=s.products||[],_e.value=s.total||0}catch{q("加载产品列表失败","error")}finally{ne.value=!1}}function lt(){I.value=1,ce()}async function nt(){xe.value=!0;try{const l=await fetch("/api/v1/target-types",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch target types");const e=await l.json();Q.value=e.target_types||[]}catch{console.warn("Failed to load target types from API, using defaults"),Q.value=[...we]}finally{xe.value=!1}}function it(l){const e=j.value;if(j.value=l,e!==l){const s=Q.value.find(o=>o.id===l);s!=null&&s.default_template?P.value=s.default_template:P.value=""}}function ot(){I.value>1&&(I.value--,ce())}function at(){I.value<Ce.value&&(I.value++,ce())}function rt(l){if(l.images&&l.images.length>0){const e=l.images.find(s=>s.is_primary);return e?e.image_url:l.images[0].image_url}return l.original_image_url||"/static/placeholder.png"}async function dt(l){K.value=l;try{const e=await fetch(`/api/v1/products/${l.id}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to load product details");const s=await e.json();m.name=s.name||"",m.dimensions=s.dimensions||"",m.featuresText=(s.features||[]).join(`
`),m.characteristicsText=(s.characteristics||[]).join(`
`),U.value=s.images||[],U.value.length===0&&s.original_image_url&&(U.value=[{id:s.id,image_url:s.original_image_url,is_primary:!0}]);const o=U.value.find(r=>r.is_primary);o?w.value=[o.id]:U.value.length>0?w.value=[U.value[0].id]:w.value=[]}catch{q("加载产品详情失败","error")}}function ut(l){const e=w.value.indexOf(l);e===-1?w.value.push(l):w.value.splice(e,1)}function ct(l,e){return u[l].find(s=>s.id===e)??null}function pt(l){$t(()=>{const e=document.querySelector(`.option-edit-input[data-option-id="${l}"]`);e&&(e.focus(),e.select())})}function Ve(l,e){const s=y[l],o=s.indexOf(e);o===-1?s.push(e):s.splice(o,1)}function ze(l){const e={id:Te(l),label:"新选项"};u[l].push(e),Ie(),ve(l,e.id)}function pe(l,e){const s=u[l].findIndex(r=>r.id===e);if(s===-1)return;u[l].splice(s,1);const o=y[l].indexOf(e);o!==-1&&y[l].splice(o,1),f.category===l&&f.id===e&&(f.category="",f.id=""),Ie()}function ve(l,e){f.category=l,f.id=e,pt(e)}function J(){if(!f.category||!f.id)return;const l=f.category,e=f.id;f.category="",f.id="";const s=ct(l,e);if(!s)return;const o=s.label.trim();if(!o){pe(l,e);return}s.label=o,Ie()}function vt(){u.scene=B.scene.map(l=>({...l})),u.angle=B.angle.map(l=>({...l})),u.style=B.style.map(l=>({...l})),u.target=B.target.map(l=>({...l})),y.scene=[],y.angle=[],y.style=[],y.target=[],f.category="",f.id="",oe.value=!1,Se(!0),localStorage.removeItem("ecommerce-image-templates"),q("模板已重置为默认值","success")}function Ie(){const l={version:2,templates:{scene:u.scene.map(e=>({id:e.id,label:e.label})),angle:u.angle.map(e=>({id:e.id,label:e.label})),style:u.style.map(e=>({id:e.id,label:e.label})),target:u.target.map(e=>({id:e.id,label:e.label}))}};localStorage.setItem("ecommerce-image-templates",JSON.stringify(l))}function me(l,e){if(!Array.isArray(l))return null;const s=[];for(const o of l){if(typeof o=="string"){const r=o.trim();r&&s.push({id:Te(e),label:r});continue}if(o&&typeof o=="object"){const r=typeof o.label=="string"?o.label.trim():"";if(!r)continue;const h=typeof o.id=="string"?String(o.id):Te(e);s.push({id:h,label:r})}}return s.length?s:null}function mt(){const l=localStorage.getItem("ecommerce-image-templates");if(l)try{const e=JSON.parse(l),s=(e==null?void 0:e.templates)||e,o=me(s==null?void 0:s.scene,"scene"),r=me(s==null?void 0:s.angle,"angle"),h=me(s==null?void 0:s.style,"style"),ge=me(s==null?void 0:s.target,"target");o&&(u.scene=o),r&&(u.angle=r),h&&(u.style=h),ge&&(u.target=ge)}catch{}}function gt(){const l=Pe(D.value);l!==D.value&&(D.value=l),localStorage.setItem("ecommerce-image-prompt-template",l)}function ft(){const l=localStorage.getItem("ecommerce-image-prompt-template");l&&(D.value=Pe(l))}function ht(){D.value=qe,localStorage.removeItem("ecommerce-image-prompt-template"),q("提示词模板已重置为默认值","success")}function yt(){L.apiKey=localStorage.getItem("global_api_key")||localStorage.getItem("video_api_key")||"",L.baseUrl=localStorage.getItem("global_base_url")||localStorage.getItem("video_base_url")||""}async function bt(){if(_.value)try{await navigator.clipboard.writeText(_.value),q("提示词已复制到剪贴板","success")}catch{q("复制失败","error")}}async function He(){if(!(!De.value||$.value)){$.value=!0,X.value="";try{const l=new FormData;l.append("prompt",_.value),l.append("model",v.model),l.append("response_format","url"),v.aspectRatio&&l.append("aspect_ratio",v.aspectRatio),v.imageSize&&l.append("image_size",v.imageSize);for(const fe of w.value){const Ke=U.value.find(je=>je.id===fe);if(Ke)try{const _t=await(await fetch(Ke.image_url)).blob();l.append("image",_t,`ref-${fe}.jpg`)}catch{console.warn("Failed to fetch reference image:",Ke.image_url)}}const e={"X-CSRF-Token":et()},s=tt(L.apiKey);s&&(e["X-API-Key"]=s);const o=st(L.baseUrl);o&&(e["X-Base-Url"]=o);const r=await fetch("/api/v1/images/edits",{method:"POST",credentials:"include",headers:e,body:l});if(!r.ok){const fe=await r.json().catch(()=>({}));throw new Error(fe.detail||`HTTP ${r.status}`)}const h=await r.json(),ge=h&&typeof h=="object"&&h.response?h.response:h,Ge=Fe(ge)||Fe(h);if(Ge)E.value=Ge;else throw new Error("Invalid response format");q("图片生成成功","success")}catch(l){X.value=l.message||"生成失败，请重试"}finally{$.value=!1}}}function kt(){if(!E.value)return;const l=document.createElement("a");l.href=E.value,l.download=`ecommerce-${Date.now()}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}let wt=0;function q(l,e="info"){const s=wt++;ae.value.push({id:s,message:l,type:e}),setTimeout(()=>{const o=ae.value.findIndex(r=>r.id===s);o!==-1&&ae.value.splice(o,1)},3e3)}return Ne(z,l=>{Z.value="",l===2&&Se()}),Ne(Re,l=>{z.value>l&&(z.value=l)}),Ct(()=>{mt(),ft(),yt(),ce(),nt(),Se(!0)}),(l,e)=>(i(),n("div",It,[e[82]||(e[82]=ee('<header class="header"><div class="logo"><div class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div><span>电商图生成</span></div><div class="header-actions"><a href="/" class="btn btn-secondary" style="text-decoration:none;display:flex;align-items:center;gap:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回主页面 </a></div></header>',1)),t("nav",Kt,[t("div",jt,[(i(),n(C,null,T(se,s=>t("button",{key:s.id,class:k(["wizard-step",{active:z.value===s.id,completed:R(s.id),disabled:!Me(s.id)}]),"aria-current":z.value===s.id?"step":void 0,"aria-disabled":!Me(s.id),onClick:o=>We(s.id)},[t("span",At,[R(s.id)?(i(),n("svg",Lt,[...e[25]||(e[25]=[t("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(i(),n("span",Ot,a(s.id),1))]),t("span",Dt,a(s.title),1)],10,Et)),64))]),Z.value?(i(),n("div",Rt,a(Z.value),1)):d("",!0)]),t("div",Ft,[t("aside",Ht,[t("section",Gt,[e[31]||(e[31]=ee('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg> Model Selection </div>',1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>v.model=s)},[...e[26]||(e[26]=[t("option",{value:"gemini-3-pro-image-preview"},"gemini-3-pro-image-preview (推荐)",-1),t("option",{value:"gemini-2.5-flash-image"},"gemini-2.5-flash-image (快速)",-1)])],512),[[Ee,v.model]]),t("div",Nt,[e[28]||(e[28]=t("label",{class:"form-label"},"Aspect Ratio",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=s=>v.aspectRatio=s)},[...e[27]||(e[27]=[ee('<option value="">Auto</option><option value="1:1">1:1 (Square)</option><option value="16:9">16:9 (Landscape)</option><option value="9:16">9:16 (Portrait)</option><option value="4:3">4:3</option><option value="3:4">3:4</option><option value="3:2">3:2</option><option value="2:3">2:3</option><option value="4:5">4:5</option><option value="5:4">5:4</option>',10)])],512),[[Ee,v.aspectRatio]])]),t("div",qt,[e[30]||(e[30]=t("label",{class:"form-label"},"Image Size",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>v.imageSize=s)},[...e[29]||(e[29]=[t("option",{value:""},"Default",-1),t("option",{value:"1K"},"1K",-1),t("option",{value:"2K"},"2K",-1),t("option",{value:"4K"},"4K",-1)])],512),[[Ee,v.imageSize]])])]),t("section",Xt,[e[37]||(e[37]=ee('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z"></path><path d="M9 2v5"></path><path d="M15 2v5"></path><path d="M2 9h20"></path></svg> 选择产品 </div>',1)),t("div",Jt,[e[32]||(e[32]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[3]||(e[3]=s=>ie.value=s),placeholder:"搜索产品...",onInput:lt},null,544),[[M,ie.value]])]),!ne.value&&le.value.length>0?(i(),n("div",Yt,[(i(!0),n(C,null,T(le.value,s=>{var o;return i(),n("div",{key:s.id,class:k(["product-item",{selected:((o=K.value)==null?void 0:o.id)===s.id}]),onClick:r=>dt(s)},[t("img",{src:rt(s),alt:s.name,class:"product-thumb"},null,8,Qt),t("div",Wt,[t("div",es,a(s.name||"未命名产品"),1),t("div",ts,a(s.dimensions||""),1)])],10,Zt)}),128))])):!ne.value&&le.value.length===0?(i(),n("div",ss,[...e[33]||(e[33]=[t("p",null,"暂无产品",-1),t("a",{href:"/products",class:"btn btn-secondary btn-sm"},"前往产品库",-1)])])):(i(),n("div",ls,[...e[34]||(e[34]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载中...",-1)])])),_e.value>ke?(i(),n("div",ns,[t("button",{class:"btn btn-ghost btn-sm",disabled:I.value<=1,onClick:ot},[...e[35]||(e[35]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,is),t("span",os,a(I.value)+" / "+a(Ce.value),1),t("button",{class:"btn btn-ghost btn-sm",disabled:I.value>=Ce.value,onClick:at},[...e[36]||(e[36]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,as)])):d("",!0)]),K.value?(i(),n("section",rs,[t("div",ds,[e[38]||(e[38]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1)),H(" 参考图片 ("+a(w.value.length)+"/"+a(U.value.length)+") ",1)]),U.value.length>0?(i(),n("div",us,[(i(!0),n(C,null,T(U.value,s=>(i(),n("div",{key:s.id,class:k(["image-item",{selected:w.value.includes(s.id)}]),onClick:o=>ut(s.id)},[t("img",{src:s.image_url,alt:"Product image"},null,8,ps),w.value.includes(s.id)?(i(),n("div",vs,[...e[39]||(e[39]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"3"},[t("polyline",{points:"20 6 9 17 4 12"})],-1)])])):d("",!0),s.is_primary?(i(),n("div",ms,"主图")):d("",!0)],10,cs))),128))])):(i(),n("div",gs,[...e[40]||(e[40]=[t("p",null,"该产品暂无图片",-1)])]))])):d("",!0)]),t("main",fs,[Y(Je,{name:"step-fade",mode:"out-in"},{default:V(()=>[z.value===1?(i(),n("section",hs,[t("div",ys,[t("div",bs,[e[41]||(e[41]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"1"),t("div",null,[t("h3",null,"产品选择"),t("p",{class:"panel-subtitle"},"选择产品与参考图，并完善提示词字段")])],-1)),K.value?d("",!0):(i(),n("span",ks,"请先从左侧选择产品"))]),K.value?(i(),n("div",ws,[t("div",_s,[t("label",xs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>g.name=s)},null,512),[[ye,g.name]]),e[42]||(e[42]=t("span",null,"产品名称",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=s=>m.name=s),disabled:!g.name,placeholder:"例如：保温杯"},null,8,Cs),[[M,m.name]])]),t("div",Ts,[t("label",$s,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>g.dimensions=s)},null,512),[[ye,g.dimensions]]),e[43]||(e[43]=t("span",null,"尺寸规格",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[7]||(e[7]=s=>m.dimensions=s),disabled:!g.dimensions,placeholder:"例如：500ml"},null,8,Ss),[[M,m.dimensions]])]),t("div",Bs,[t("label",Us,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>g.features=s)},null,512),[[ye,g.features]]),e[44]||(e[44]=t("span",null,"功能特征",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[9]||(e[9]=s=>m.featuresText=s),disabled:!g.features,rows:"2",placeholder:"每行一个特征"},null,8,Ps),[[M,m.featuresText]])]),t("div",Ms,[t("label",Vs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=s=>g.characteristics=s)},null,512),[[ye,g.characteristics]]),e[45]||(e[45]=t("span",null,"产品特点",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[11]||(e[11]=s=>m.characteristicsText=s),disabled:!g.characteristics,rows:"2",placeholder:"每行一个特点"},null,8,zs),[[M,m.characteristicsText]])])])):(i(),n("div",Is," 选择产品后将自动填充名称、规格与特征信息。 "))])])):z.value===2?(i(),n("section",Ks,[t("div",js,[t("div",{class:"panel-header"},[e[47]||(e[47]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"2"),t("div",null,[t("h3",null,"模板配置"),t("p",{class:"panel-subtitle"},"点击标签可多选，支持就地编辑")])],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:vt},[...e[46]||(e[46]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),H(" 重置模板 ",-1)])])]),t("div",Es,[Y(be,{title:"场景选择",summary:$e("scene"),open:O.scene,onToggle:e[13]||(e[13]=s=>de("scene"))},{actions:V(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[12]||(e[12]=b(s=>ze("scene"),["stop"]))},[...e[48]||(e[48]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:V(()=>[t("div",As,[(i(!0),n(C,null,T(u.scene,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:y.scene.includes(s.id),editing:A("scene",s.id)}])},[A("scene",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:J,onKeydown:te(b(J,["prevent"]),["enter"])},null,40,Os)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>Ve("scene",s.id)},a(s.label),9,Ls)),A("scene",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:b(o=>ve("scene",s.id),["stop"])},[...e[49]||(e[49]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Ds)),t("button",{class:"chip-delete",onClick:b(o=>pe("scene",s.id),["stop"])},[...e[50]||(e[50]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Rs)],2))),128))])]),_:1},8,["summary","open"]),Y(be,{title:"拍摄角度",summary:$e("angle"),open:O.angle,onToggle:e[15]||(e[15]=s=>de("angle"))},{actions:V(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[14]||(e[14]=b(s=>ze("angle"),["stop"]))},[...e[51]||(e[51]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:V(()=>[t("div",Fs,[(i(!0),n(C,null,T(u.angle,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:y.angle.includes(s.id),editing:A("angle",s.id)}])},[A("angle",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:J,onKeydown:te(b(J,["prevent"]),["enter"])},null,40,Gs)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>Ve("angle",s.id)},a(s.label),9,Hs)),A("angle",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:b(o=>ve("angle",s.id),["stop"])},[...e[52]||(e[52]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Ns)),t("button",{class:"chip-delete",onClick:b(o=>pe("angle",s.id),["stop"])},[...e[53]||(e[53]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,qs)],2))),128))])]),_:1},8,["summary","open"]),Y(be,{title:"风格 / 光影",summary:$e("style"),open:O.style,onToggle:e[17]||(e[17]=s=>de("style"))},{"title-extra":V(()=>[...e[54]||(e[54]=[t("span",{class:"optional-tag"},"(可选)",-1)])]),actions:V(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[16]||(e[16]=b(s=>ze("style"),["stop"]))},[...e[55]||(e[55]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:V(()=>[t("div",Xs,[(i(!0),n(C,null,T(u.style,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:y.style.includes(s.id),editing:A("style",s.id)}])},[A("style",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:J,onKeydown:te(b(J,["prevent"]),["enter"])},null,40,Ys)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>Ve("style",s.id)},a(s.label),9,Js)),A("style",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:b(o=>ve("style",s.id),["stop"])},[...e[56]||(e[56]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Zs)),t("button",{class:"chip-delete",onClick:b(o=>pe("style",s.id),["stop"])},[...e[57]||(e[57]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Qs)],2))),128))])]),_:1},8,["summary","open"]),Y(be,{title:"生成目标",summary:W.value?W.value.name:"未选择",open:O.target,onToggle:e[20]||(e[20]=s=>de("target"))},{default:V(()=>[t("div",Ws,[t("div",el,[(i(!0),n(C,null,T(Q.value,s=>(i(),n("label",{key:s.id,class:k(["target-type-radio",{selected:j.value===s.id}])},[p(t("input",{type:"radio",name:"target-type",value:s.id,"onUpdate:modelValue":e[18]||(e[18]=o=>j.value=o),onChange:o=>it(s.id)},null,40,tl),[[Tt,j.value]]),t("span",sl,a(s.name),1)],2))),128))]),j.value?(i(),n("div",ll,[e[58]||(e[58]=t("label",{class:"target-description-label"},"目标描述",-1)),p(t("textarea",{class:"form-input target-textarea","onUpdate:modelValue":e[19]||(e[19]=s=>P.value=s),placeholder:Ye.value,rows:"3"},null,8,nl),[[M,P.value]]),e[59]||(e[59]=t("p",{class:"target-description-hint"}," 描述将作为生成提示词的一部分，请详细描述您期望的效果 ",-1))])):d("",!0),xe.value?(i(),n("div",il,[...e[60]||(e[60]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载目标类型...",-1)])])):d("",!0)])]),_:1},8,["summary","open"])]),t("div",ol,[t("div",{class:"template-editor-header"},[e[62]||(e[62]=t("div",null,[t("h4",null,"提示词模板"),t("p",{class:"template-editor-subtitle"},"系统会自动拼接已选信息，可补充额外描述")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:ht},[...e[61]||(e[61]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),H(" 重置模板 ",-1)])])]),t("div",al,[e[63]||(e[63]=t("div",{class:"template-editor-hint"}," 已选场景/角度等会自动生成，例如：场景：客厅，拍摄角度：正面。 ",-1)),p(t("textarea",{class:"form-input template-textarea","onUpdate:modelValue":e[21]||(e[21]=s=>D.value=s),rows:"4",placeholder:"补充提示词，如：高清产品摄影",onInput:gt},null,544),[[M,D.value]])])])])])):z.value===3?(i(),n("section",rl,[t("div",dl,[t("div",ul,[e[64]||(e[64]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"3"),t("div",null,[t("h3",null,"提示词预览"),t("p",{class:"panel-subtitle"},"分段预览并高亮关键信息")])],-1)),_.value?d("",!0):(i(),n("span",cl,"完善产品信息与模板后自动生成"))]),t("div",pl,[t("div",vl,[e[65]||(e[65]=t("span",{class:"prompt-label"},"产品信息",-1)),t("div",{class:k(["prompt-value",{empty:x.value.product.length===0}])},[x.value.product.length?(i(!0),n(C,{key:0},T(x.value.product,(s,o)=>(i(),n("span",{key:`product-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",ml,"未选择或未填写"))],2)]),t("div",gl,[e[66]||(e[66]=t("span",{class:"prompt-label"},"场景",-1)),t("div",{class:k(["prompt-value",{empty:x.value.scene.length===0}])},[x.value.scene.length?(i(!0),n(C,{key:0},T(x.value.scene,(s,o)=>(i(),n("span",{key:`scene-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",fl,"未选择场景"))],2)]),t("div",hl,[e[67]||(e[67]=t("span",{class:"prompt-label"},"角度",-1)),t("div",{class:k(["prompt-value",{empty:x.value.angle.length===0}])},[x.value.angle.length?(i(!0),n(C,{key:0},T(x.value.angle,(s,o)=>(i(),n("span",{key:`angle-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",yl,"未选择角度"))],2)]),t("div",bl,[e[68]||(e[68]=t("span",{class:"prompt-label"},"风格 / 光影",-1)),t("div",{class:k(["prompt-value",{empty:x.value.style.length===0}])},[x.value.style.length?(i(!0),n(C,{key:0},T(x.value.style,(s,o)=>(i(),n("span",{key:`style-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",kl,"未选择风格"))],2)]),t("div",wl,[e[69]||(e[69]=t("span",{class:"prompt-label"},"生成目标",-1)),t("div",{class:k(["prompt-value",{empty:!P.value}])},[P.value?(i(),n("span",_l,[W.value?(i(),n("span",xl,a(W.value.name)+"：",1)):d("",!0),H(" "+a(P.value),1)])):(i(),n("span",Cl,"未选择目标"))],2)])]),t("div",Tl,[t("div",$l,[e[71]||(e[71]=t("div",null,[t("h4",null,"完整 Prompt"),t("p",{class:"prompt-full-hint"},"可直接复制用于生成")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:bt,disabled:!_.value},[...e[70]||(e[70]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),H(" 复制 ",-1)])],8,Sl)]),t("div",Bl,[_.value?(i(),n("p",Ul,a(_.value),1)):(i(),n("p",Pl,"选择产品和模板选项后，提示词将在这里生成。"))])])])])):(i(),n("section",Ml,[t("div",Vl,[t("div",zl,[e[72]||(e[72]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"4"),t("div",null,[t("h3",null,"生成与结果"),t("p",{class:"panel-subtitle"},"确认参考图与提示词后开始生成")])],-1)),ue.value?(i(),n("span",Il,a(ue.value),1)):d("",!0)]),t("div",Kl,[!$.value&&!E.value?(i(),n("div",jl,[...e[73]||(e[73]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),t("h3",null,"准备生成",-1),t("p",null,"选择产品、参考图片与模板选项，然后点击生成。",-1)])])):d("",!0),$.value?(i(),n("div",El,[...e[74]||(e[74]=[t("div",{class:"spinner"},null,-1),t("p",null,"正在生成图片...",-1)])])):d("",!0),E.value&&!$.value?(i(),n("div",Al,[t("img",{src:E.value,alt:"Generated image",class:"result-image"},null,8,Ll),t("div",{class:"result-actions"},[t("button",{class:"btn btn-secondary",onClick:kt},[...e[75]||(e[75]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),H(" 下载 ",-1)])]),t("button",{class:"btn btn-primary",onClick:He},[...e[76]||(e[76]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),H(" 重新生成 ",-1)])])])])):d("",!0)]),t("div",Ol,[t("button",{class:"generate-btn",disabled:!De.value||$.value,onClick:He},[$.value?(i(),n("div",Fl)):(i(),n("svg",Rl,[...e[77]||(e[77]=[t("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)])])),H(" "+a($.value?"生成中...":"生成电商图"),1)],8,Dl),ue.value?(i(),n("div",Hl,a(ue.value),1)):d("",!0)])])]))]),_:1})]),t("aside",Gl,[t("div",Nl,[t("div",ql,[e[78]||(e[78]=t("h4",null,"提示词预览",-1)),_.value?d("",!0):(i(),n("span",Xl,"完成前两步后显示"))]),t("div",Jl,[_.value?(i(),n("p",Yl,a(_.value),1)):(i(),n("p",Zl,"选择产品与模板选项后生成提示词。"))])]),t("div",Ql,[e[80]||(e[80]=t("div",{class:"preview-card-header"},[t("h4",null,"生成结果")],-1)),t("div",Wl,[$.value?(i(),n("div",en,[...e[79]||(e[79]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"正在生成...",-1)])])):E.value?(i(),n("div",tn,[t("img",{src:E.value,alt:"Generated preview",class:"preview-image"},null,8,sn)])):(i(),n("p",ln,"生成完成后显示结果。"))])])])]),t("div",nn,[(i(!0),n(C,null,T(ae.value,s=>(i(),n("div",{key:s.id,class:k(["toast",s.type])},a(s.message),3))),128))]),X.value?(i(),n("div",{key:0,class:"error-overlay",onClick:e[24]||(e[24]=s=>X.value="")},[t("div",{class:"error-modal",onClick:e[23]||(e[23]=b(()=>{},["stop"]))},[e[81]||(e[81]=ee('<div class="error-header"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><h3>生成失败</h3></div>',1)),t("p",null,a(X.value),1),t("button",{class:"btn btn-primary",onClick:e[22]||(e[22]=s=>X.value="")},"确定")])])):d("",!0)]))}});St(on).mount("#app");
