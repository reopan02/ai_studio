import{d as A,r,c as K,o as V,a as i,b as d,e as a,f as h,t as f,w,n as x,v as P,g as b,h as C,i as z,j as T}from"./runtime-dom.esm-bundler-BMO6sHJC.js";import{g as L}from"./auth-DhJl3iPe.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css                   */const R={class:"container"},E={key:0,class:"card error-banner",style:{"margin-bottom":"20px"}},N={class:"card api-config-section"},D={class:"config-title"},G={class:"config-content"},$={class:"config-form"},j={class:"form-group"},O={class:"input-wrapper"},Y=["type"],Z={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},q={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},F={class:"form-group"},J={class:"input-wrapper"},Q=["type"],W={key:0,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},X={key:1,width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},ee={class:"portal-grid"},ae={key:0,href:"/admin",class:"card portal-card"},te=A({__name:"portal-page",setup(le){const v={apiKey:"global_api_key",baseUrl:"global_base_url"},y=r(""),m=r(!1),c=r(!1),t=r(""),o=r(""),p=r(!1),u=r(!1),n=r(""),g=r("success"),k=K(()=>!!(t.value||o.value));function S(){c.value=!c.value}function _(l){return String(l||"").trim().replace(/^bearer\s+/i,"").trim()}function B(l){const e=String(l||"").trim();if(!e)return null;try{const s=new URL(e);if(s.protocol!=="https:"&&s.protocol!=="http:")throw new Error("Base URL must use HTTP or HTTPS");return s.origin}catch{throw new Error("Invalid URL format")}}function I(){t.value=localStorage.getItem(v.apiKey)||"",o.value=localStorage.getItem(v.baseUrl)||"",t.value||(t.value=localStorage.getItem("video_api_key")||localStorage.getItem("apiKey")||""),o.value||(o.value=localStorage.getItem("video_base_url")||localStorage.getItem("baseUrl")||"")}function U(){try{const l=_(t.value),e=B(o.value);t.value=l,o.value=e||"",localStorage.setItem(v.apiKey,t.value),localStorage.setItem(v.baseUrl,o.value),localStorage.setItem("video_api_key",t.value),localStorage.setItem("video_base_url",o.value),localStorage.setItem("apiKey",t.value),localStorage.setItem("baseUrl",o.value),n.value="配置已保存，将应用到所有功能模块",g.value="success",setTimeout(()=>{n.value=""},3e3)}catch(l){n.value=l.message||"保存失败",g.value="error",setTimeout(()=>{n.value=""},3e3)}}function M(){t.value="",o.value="",localStorage.removeItem(v.apiKey),localStorage.removeItem(v.baseUrl),localStorage.removeItem("video_api_key"),localStorage.removeItem("video_base_url"),localStorage.removeItem("apiKey"),localStorage.removeItem("baseUrl"),n.value="配置已清除",g.value="success",setTimeout(()=>{n.value=""},3e3)}return V(async()=>{const l=new URLSearchParams(window.location.search);y.value=l.get("error")||"",I();try{const e=await L();m.value=!!(e!=null&&e.is_admin)}catch{m.value=!1}}),(l,e)=>(d(),i("div",R,[e[18]||(e[18]=a("header",null,[a("h1",null,"Video API Portal"),a("p",{style:{color:"var(--text-secondary)","margin-top":"8px"}},"请选择功能模块")],-1)),y.value?(d(),i("section",E,f(y.value),1)):h("",!0),a("section",N,[a("div",{class:"config-header",onClick:S},[a("div",D,[e[4]||(e[4]=a("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("circle",{cx:"12",cy:"12",r:"3"}),a("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})],-1)),e[5]||(e[5]=a("span",null,"全局 API 配置",-1)),a("span",{class:x(["config-status",{configured:k.value}])},f(k.value?"已配置":"未配置"),3)]),(d(),i("svg",{class:x(["chevron",{expanded:c.value}]),width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[...e[6]||(e[6]=[a("polyline",{points:"6 9 12 15 18 9"},null,-1)])],2))]),w(a("div",G,[e[15]||(e[15]=a("p",{class:"config-desc"},"配置 API Key 和 Base URL，将自动应用到所有功能模块",-1)),a("div",$,[a("div",j,[e[9]||(e[9]=a("label",{class:"form-label"},"API Key",-1)),a("div",O,[w(a("input",{type:p.value?"text":"password",class:"form-input","onUpdate:modelValue":e[0]||(e[0]=s=>t.value=s),placeholder:"输入您的 API Key"},null,8,Y),[[b,t.value]]),a("button",{class:"toggle-btn",onClick:e[1]||(e[1]=s=>p.value=!p.value),type:"button"},[p.value?(d(),i("svg",q,[...e[8]||(e[8]=[a("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),a("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(d(),i("svg",Z,[...e[7]||(e[7]=[a("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),a("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),a("div",F,[e[12]||(e[12]=a("label",{class:"form-label"},"Base URL",-1)),a("div",J,[w(a("input",{type:u.value?"text":"password",class:"form-input","onUpdate:modelValue":e[2]||(e[2]=s=>o.value=s),placeholder:"https://api.example.com"},null,8,Q),[[b,o.value]]),a("button",{class:"toggle-btn",onClick:e[3]||(e[3]=s=>u.value=!u.value),type:"button"},[u.value?(d(),i("svg",X,[...e[11]||(e[11]=[a("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"},null,-1),a("line",{x1:"1",y1:"1",x2:"23",y2:"23"},null,-1)])])):(d(),i("svg",W,[...e[10]||(e[10]=[a("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},null,-1),a("circle",{cx:"12",cy:"12",r:"3"},null,-1)])]))])])]),a("div",{class:"btn-group"},[a("button",{class:"btn btn-primary",onClick:U},[...e[13]||(e[13]=[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),a("polyline",{points:"17 21 17 13 7 13 7 21"}),a("polyline",{points:"7 3 7 8 15 8"})],-1),C(" 保存配置 ",-1)])]),a("button",{class:"btn btn-secondary",onClick:M},[...e[14]||(e[14]=[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[a("polyline",{points:"1 4 1 10 7 10"}),a("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),C(" 清除 ",-1)])])])]),n.value?(d(),i("div",{key:0,class:x(["save-message",g.value])},f(n.value),3)):h("",!0)],512),[[P,c.value]])]),a("div",ee,[e[17]||(e[17]=z('<a href="/video" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><rect x="2" y="2" width="20" height="20" rx="2.18" ry="2.18" data-v-595378d0></rect><line x1="7" y1="2" x2="7" y2="22" data-v-595378d0></line><line x1="17" y1="2" x2="17" y2="22" data-v-595378d0></line><line x1="2" y1="12" x2="22" y2="12" data-v-595378d0></line><line x1="2" y1="7" x2="7" y2="7" data-v-595378d0></line><line x1="2" y1="17" x2="7" y2="17" data-v-595378d0></line><line x1="17" y1="17" x2="22" y2="17" data-v-595378d0></line><line x1="17" y1="7" x2="22" y2="7" data-v-595378d0></line></svg><div class="portal-title" data-v-595378d0>视频生成</div><div class="portal-desc" data-v-595378d0>Sora 2, Veo, Seedance 等模型视频生成</div></a><a href="/storage" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" data-v-595378d0></path><polyline points="7 10 12 15 17 10" data-v-595378d0></polyline><line x1="12" y1="15" x2="12" y2="3" data-v-595378d0></line></svg><div class="portal-title" data-v-595378d0>存储库</div><div class="portal-desc" data-v-595378d0>查看历史生成记录</div></a><a href="/image" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-595378d0></rect><circle cx="8.5" cy="8.5" r="1.5" data-v-595378d0></circle><polyline points="21 15 16 10 5 21" data-v-595378d0></polyline></svg><div class="portal-title" data-v-595378d0>图像处理</div><div class="portal-desc" data-v-595378d0>多图参考的图像编辑 (Gemini)</div></a><a href="/image-generate" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" data-v-595378d0></polygon></svg><div class="portal-title" data-v-595378d0>图像生成</div><div class="portal-desc" data-v-595378d0>文生图，根据文字描述生成图像</div></a><a href="/products" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z" data-v-595378d0></path><path d="M9 2v5" data-v-595378d0></path><path d="M15 2v5" data-v-595378d0></path><path d="M2 9h20" data-v-595378d0></path></svg><div class="portal-title" data-v-595378d0>产品库</div><div class="portal-desc" data-v-595378d0>产品图片识别与管理</div></a><a href="/ecommerce-image" class="card portal-card" data-v-595378d0><svg class="portal-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" data-v-595378d0><rect x="3" y="3" width="18" height="18" rx="2" ry="2" data-v-595378d0></rect><circle cx="8.5" cy="8.5" r="1.5" data-v-595378d0></circle><polyline points="21 15 16 10 5 21" data-v-595378d0></polyline><path d="M14 3v4h4" data-v-595378d0></path></svg><div class="portal-title" data-v-595378d0>电商图生成</div><div class="portal-desc" data-v-595378d0>基于产品库的电商图快速生成</div></a>',6)),m.value?(d(),i("a",ae,[...e[16]||(e[16]=[a("svg",{class:"portal-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[a("path",{d:"M12 1l3 5 5 1-3.5 4.2.8 5.8L12 15l-5.3 2.9.8-5.8L4 7l5-1 3-5z"})],-1),a("div",{class:"portal-title"},"Admin",-1),a("div",{class:"portal-desc"},"User management & system stats",-1)])])):h("",!0)])]))}}),oe=H(te,[["__scopeId","data-v-595378d0"]]);T(oe).mount("#app");
