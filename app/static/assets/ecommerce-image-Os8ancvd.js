import{d as Re,a as n,b as i,n as k,e as t,s as Z,l as Q,p as v,f as u,u as be,t as a,T as Ge,x as M,w as p,v as ht,m as N,r as g,c as O,y as He,o as ft,g as ne,F as _,q as x,z as Ie,k as U,i as F,A as ke,B as yt,j as bt}from"./runtime-dom.esm-bundler-BvWk_EiB.js";/* empty css                        */const kt=["aria-expanded","onKeydown"],wt={class:"collapsible-title"},_t={class:"collapsible-title-text"},xt={key:0,class:"collapsible-summary"},Ct={class:"collapsible-actions"},$t={class:"collapsible-body"},we=Re({__name:"CollapsibleGroup",props:{title:{},summary:{},open:{type:Boolean}},emits:["toggle"],setup(R,{emit:P}){const q=P;function c(){q("toggle")}return(X,T)=>(i(),n("div",{class:k(["collapsible-group",{collapsed:!R.open}])},[t("div",{class:"collapsible-header",role:"button",tabindex:"0","aria-expanded":R.open,onClick:c,onKeydown:[Q(v(c,["prevent"]),["enter"]),Q(v(c,["prevent"]),["space"])]},[t("div",wt,[t("span",_t,a(R.title),1),be(X.$slots,"title-extra")]),R.open?u("",!0):(i(),n("div",xt,[be(X.$slots,"summary",{},()=>[t("span",null,a(R.summary),1)])])),t("div",Ct,[be(X.$slots,"actions"),T[0]||(T[0]=t("span",{class:"collapsible-toggle"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})])],-1))])],40,kt),Z(Ge,{name:"collapse"},{default:M(()=>[p(t("div",$t,[be(X.$slots,"default")],512),[[ht,R.open]])]),_:3})],2))}}),Tt={class:"ecommerce-image-page"},St={class:"wizard-nav"},Bt={class:"wizard-steps"},Ut=["aria-current","aria-disabled","onClick"],Mt={class:"wizard-step-indicator"},Pt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Vt={key:1},zt={class:"wizard-step-label"},It={key:0,class:"wizard-step-hint"},Kt={class:"main-container"},jt={class:"sidebar"},Lt={class:"sidebar-section"},Ot={class:"form-group",style:{"margin-top":"16px"}},At={class:"form-group"},Et={class:"form-group"},Dt={class:"sidebar-section"},Ht={class:"search-wrapper"},Nt={key:0,class:"product-list"},Rt=["onClick"],Gt=["src","alt"],Ft={class:"product-info"},qt={class:"product-name"},Xt={class:"product-meta"},Jt={key:1,class:"product-list-empty"},Zt={key:2,class:"product-list-loading"},Qt={key:3,class:"pagination"},Wt=["disabled"],Yt={class:"page-info"},es=["disabled"],ts={key:0,class:"sidebar-section"},ss={class:"section-title"},ls={key:0,class:"image-grid"},ns=["onClick"],is=["src"],os={key:0,class:"image-check"},as={key:1,class:"image-primary"},rs={key:1,class:"no-images"},ds={class:"main-content"},us={key:0,class:"workflow-section"},cs={class:"content-panel"},ps={class:"panel-header"},vs={key:0,class:"panel-hint"},ms={key:0,class:"product-fields"},gs={class:"field-row"},hs={class:"field-checkbox"},fs=["disabled"],ys={class:"field-row"},bs={class:"field-checkbox"},ks=["disabled"],ws={class:"field-row"},_s={class:"field-checkbox"},xs=["disabled"],Cs={class:"field-row"},$s={class:"field-checkbox"},Ts=["disabled"],Ss={key:1,class:"panel-empty"},Bs={key:1,class:"workflow-section"},Us={class:"content-panel"},Ms={class:"template-modules"},Ps={class:"option-chips"},Vs=["onClick"],zs=["onUpdate:modelValue","data-option-id","onKeydown"],Is=["onClick"],Ks=["onClick"],js={class:"option-chips"},Ls=["onClick"],Os=["onUpdate:modelValue","data-option-id","onKeydown"],As=["onClick"],Es=["onClick"],Ds={class:"option-chips"},Hs=["onClick"],Ns=["onUpdate:modelValue","data-option-id","onKeydown"],Rs=["onClick"],Gs=["onClick"],Fs={class:"option-chips"},qs=["onClick"],Xs=["onUpdate:modelValue","data-option-id","onKeydown"],Js=["onClick"],Zs=["onClick"],Qs={class:"template-editor"},Ws={class:"template-editor-section"},Ys={key:2,class:"workflow-section"},el={class:"content-panel prompt-preview-panel"},tl={class:"panel-header"},sl={key:0,class:"panel-hint"},ll={class:"prompt-structured"},nl={class:"prompt-row"},il={key:1,class:"prompt-empty"},ol={class:"prompt-row"},al={key:1,class:"prompt-empty"},rl={class:"prompt-row"},dl={key:1,class:"prompt-empty"},ul={class:"prompt-row"},cl={key:1,class:"prompt-empty"},pl={class:"prompt-row"},vl={key:1,class:"prompt-empty"},ml={class:"prompt-full"},gl={class:"prompt-full-header"},hl=["disabled"],fl={class:"prompt-full-body"},yl={key:0},bl={key:1,class:"prompt-placeholder"},kl={key:3,class:"workflow-section"},wl={class:"content-panel"},_l={class:"panel-header"},xl={key:0,class:"panel-hint"},Cl={class:"result-area"},$l={key:0,class:"result-placeholder"},Tl={key:1,class:"loading-state"},Sl={key:2,class:"result-container"},Bl=["src"],Ul={key:0,class:"result-grid"},Ml=["onClick"],Pl=["src","alt"],Vl={class:"result-thumb-index"},zl={class:"generate-section"},Il=["disabled"],Kl={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},jl={key:1,class:"spinner-small"},Ll={key:0,class:"generate-hint"},Ol={class:"preview-panel"},Al={class:"preview-card"},El={class:"preview-card-header"},Dl={key:0,class:"preview-card-hint"},Hl={class:"preview-card-body"},Nl={key:0},Rl={key:1,class:"preview-placeholder"},Gl={class:"preview-card"},Fl={class:"preview-card-body preview-result"},ql={key:0,class:"preview-loading"},Xl={key:1},Jl=["src"],Zl={key:2,class:"preview-placeholder"},Ql={class:"toast-container"},Ne="高清产品摄影",_e=10,Wl=Re({__name:"ecommerce-image-page",setup(R){const P={scene:[{id:"scene-white",label:"白色背景"},{id:"scene-natural-table",label:"自然光桌面"},{id:"scene-outdoor",label:"户外场景"},{id:"scene-solid",label:"纯色背景"},{id:"scene-life",label:"生活场景"}],angle:[{id:"angle-front",label:"正面"},{id:"angle-45",label:"45度侧面"},{id:"angle-top",label:"俯视"},{id:"angle-eye",label:"平视"},{id:"angle-close",label:"特写"}],style:[{id:"style-soft",label:"柔和光影"},{id:"style-contrast",label:"高对比度"},{id:"style-natural",label:"自然光"},{id:"style-studio",label:"专业棚拍"},{id:"style-warm",label:"暖色调"}],target:[{id:"target-main",label:"主图"},{id:"target-detail",label:"详情页"},{id:"target-poster",label:"海报"},{id:"target-white",label:"白底图"},{id:"target-scene",label:"场景图"}]},q=N({apiKey:"",baseUrl:""}),c=N({model:"gemini-3-pro-image-preview",aspectRatio:"",imageSize:"1K",n:1}),X=[{id:1,title:"选择产品"},{id:2,title:"配置模板"},{id:3,title:"预览提示词"},{id:4,title:"生成图片"}],T=g(1),W=g(""),ie=g([]),oe=g(!1),ae=g(""),z=g(1),xe=g(0),I=g(null),V=g([]),C=g([]),h=N({name:"",dimensions:"",featuresText:"",characteristicsText:""}),f=N({name:!0,dimensions:!0,features:!0,characteristics:!0}),d=N({scene:P.scene.map(l=>({...l})),angle:P.angle.map(l=>({...l})),style:P.style.map(l=>({...l})),target:P.target.map(l=>({...l}))}),m=N({scene:[],angle:[],style:[],target:[]}),A=N({scene:!0,angle:!1,style:!1,target:!1}),re=g(!1),y=N({category:"",id:""}),E=g(Ne),B=g(!1),K=g(""),Y=g([]),J=g(""),de=g([]),Ce=O(()=>Math.ceil(xe.value/_e));function $e(l){return globalThis.crypto&&"randomUUID"in globalThis.crypto?`${l}-${globalThis.crypto.randomUUID()}`:`${l}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function Ke(l){return l.split(`
`).map(e=>e.trim()).filter(Boolean)}function je(l){return l.filter(Boolean).join("、")}function ue(l){const e=new Set(m[l]);return d[l].filter(s=>e.has(s.id)).map(s=>s.label.trim()).filter(Boolean)}function S(l,e){return y.category===l&&y.id===e}const j=O(()=>({scene:ue("scene"),angle:ue("angle"),style:ue("style"),target:ue("target")})),Fe=O(()=>m.scene.length>0||m.angle.length>0||m.style.length>0||m.target.length>0);function ce(l){const e=j.value[l];return e.length?e.length<=2?e.join("、"):`${e[0]}、${e[1]} 等${e.length}项`:"未选择"}function pe(l){A[l]=!A[l],re.value=!0}function Te(l=!1){if(re.value&&!l)return;const e=["scene","angle","style","target"];let s=!1;e.forEach(o=>{!s&&m[o].length===0?(A[o]=!0,s=!0):A[o]=!1}),re.value=!1}const Se=O(()=>{const l=[],e=h.name.trim(),s=h.dimensions.trim();return f.name&&e&&l.push(e),f.dimensions&&s&&l.push(s),f.features&&l.push(...Ke(h.featuresText)),f.characteristics&&l.push(...Ke(h.characteristicsText)),l}),b=O(()=>({product:Se.value,scene:j.value.scene,angle:j.value.angle,style:j.value.style,target:j.value.target}));function ve(l,e){return e.length?`${l}：${je(e)}`:""}function Le(l){return l.replace(/[，、]{2,}/g,"，").replace(/^[，、\s]+/,"").replace(/[，、\s]+$/,"").replace(/\s*[，、]\s*/g,"，").trim()}function Be(l){if(!l)return"";const e=l.trim();if(!e.includes("{{"))return e;const s=e.replace(/\{\{(\w+)(?:\|([^}]*))?\}\}/g,(o,r,w)=>w??"");return Le(s)}const $=O(()=>{if(!I.value)return"";const l=[];Se.value.length&&l.push(je(Se.value));const e=ve("场景",j.value.scene);e&&l.push(e);const s=ve("拍摄角度",j.value.angle);s&&l.push(s);const o=ve("风格",j.value.style);o&&l.push(o);const r=ve("生成目标",j.value.target);r&&l.push(r);const w=Be(E.value);return w&&l.push(w),Le(l.join("，"))}),Oe=O(()=>I.value&&C.value.length>0&&$.value.length>0),me=O(()=>B.value?"正在生成图片...":I.value?C.value.length===0?"请选择至少一张参考图片":$.value?"":"请完善模板选项或产品信息":"请先在左侧选择产品");function D(l){return l===1?!!I.value&&C.value.length>0:l===2?Fe.value:l===3?$.value.length>0:l===4?K.value.length>0:!1}const Ae=O(()=>D(1)?D(2)?D(3)?4:3:2:1);function Ue(l){return l<=Ae.value}function qe(){return D(1)?D(2)?D(3)?"请先完成前置步骤":"请先完成步骤3：完善提示词预览":"请先完成步骤2：至少选择一个模板选项":"请先完成步骤1：选择产品并勾选参考图"}function Xe(l){if(Ue(l)){T.value=l,W.value="";return}W.value=qe()}function Je(){const l=document.cookie.match(/csrf_token=([^;]+)/);return l?l[1]:""}function Ze(l){return String(l||"").trim().replace(/^bearer\s+/i,"").trim()}function Qe(l){return String(l||"").trim()||null}function Me(l){if(!l||typeof l!="object")return[];const e=[];if(Array.isArray(l.data))for(const s of l.data)!s||typeof s!="object"||(typeof s.url=="string"&&s.url?e.push(s.url):typeof s.b64_json=="string"&&s.b64_json?e.push(`data:image/png;base64,${s.b64_json}`):typeof s.image_url=="string"&&s.image_url?e.push(s.image_url):typeof s.imageUrl=="string"&&s.imageUrl&&e.push(s.imageUrl));return typeof l.url=="string"&&l.url&&e.push(l.url),typeof l.b64_json=="string"&&l.b64_json&&e.push(`data:image/png;base64,${l.b64_json}`),typeof l.image_url=="string"&&l.image_url&&e.push(l.image_url),typeof l.imageUrl=="string"&&l.imageUrl&&e.push(l.imageUrl),Array.from(new Set(e))}async function ge(){oe.value=!0;try{const l=new URLSearchParams({offset:String((z.value-1)*_e),limit:String(_e)});ae.value&&l.set("name",ae.value);const e=await fetch(`/api/v1/products?${l}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch products");const s=await e.json();ie.value=s.products||[],xe.value=s.total||0}catch{G("加载产品列表失败","error")}finally{oe.value=!1}}function We(){z.value=1,ge()}function Ye(){z.value>1&&(z.value--,ge())}function et(){z.value<Ce.value&&(z.value++,ge())}function tt(l){if(l.images&&l.images.length>0){const e=l.images.find(s=>s.is_primary);return e?e.image_url:l.images[0].image_url}return l.original_image_url||"/static/placeholder.png"}async function st(l){I.value=l;try{const e=await fetch(`/api/v1/products/${l.id}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to load product details");const s=await e.json();h.name=s.name||"",h.dimensions=s.dimensions||"",h.featuresText=(s.features||[]).join(`
`),h.characteristicsText=(s.characteristics||[]).join(`
`),V.value=s.images||[],V.value.length===0&&s.original_image_url&&(V.value=[{id:s.id,image_url:s.original_image_url,is_primary:!0}]);const o=V.value.find(r=>r.is_primary);o?C.value=[o.id]:V.value.length>0?C.value=[V.value[0].id]:C.value=[]}catch{G("加载产品详情失败","error")}}function lt(l){const e=C.value.indexOf(l);e===-1?C.value.push(l):C.value.splice(e,1)}function nt(l,e){return d[l].find(s=>s.id===e)??null}function it(l){yt(()=>{const e=document.querySelector(`.option-edit-input[data-option-id="${l}"]`);e&&(e.focus(),e.select())})}function he(l,e){const s=m[l],o=s.indexOf(e);o===-1?s.push(e):s.splice(o,1)}function fe(l){const e={id:$e(l),label:"新选项"};d[l].push(e),Pe(),te(l,e.id)}function ee(l,e){const s=d[l].findIndex(r=>r.id===e);if(s===-1)return;d[l].splice(s,1);const o=m[l].indexOf(e);o!==-1&&m[l].splice(o,1),y.category===l&&y.id===e&&(y.category="",y.id=""),Pe()}function te(l,e){y.category=l,y.id=e,it(e)}function H(){if(!y.category||!y.id)return;const l=y.category,e=y.id;y.category="",y.id="";const s=nt(l,e);if(!s)return;const o=s.label.trim();if(!o){ee(l,e);return}s.label=o,Pe()}function ot(){d.scene=P.scene.map(l=>({...l})),d.angle=P.angle.map(l=>({...l})),d.style=P.style.map(l=>({...l})),d.target=P.target.map(l=>({...l})),m.scene=[],m.angle=[],m.style=[],m.target=[],y.category="",y.id="",re.value=!1,Te(!0),localStorage.removeItem("ecommerce-image-templates"),G("模板已重置为默认值","success")}function Pe(){const l={version:2,templates:{scene:d.scene.map(e=>({id:e.id,label:e.label})),angle:d.angle.map(e=>({id:e.id,label:e.label})),style:d.style.map(e=>({id:e.id,label:e.label})),target:d.target.map(e=>({id:e.id,label:e.label}))}};localStorage.setItem("ecommerce-image-templates",JSON.stringify(l))}function ye(l,e){if(!Array.isArray(l))return null;const s=[];for(const o of l){if(typeof o=="string"){const r=o.trim();r&&s.push({id:$e(e),label:r});continue}if(o&&typeof o=="object"){const r=typeof o.label=="string"?o.label.trim():"";if(!r)continue;const w=typeof o.id=="string"?String(o.id):$e(e);s.push({id:w,label:r})}}return s.length?s:null}function at(){const l=localStorage.getItem("ecommerce-image-templates");if(l)try{const e=JSON.parse(l),s=(e==null?void 0:e.templates)||e,o=ye(s==null?void 0:s.scene,"scene"),r=ye(s==null?void 0:s.angle,"angle"),w=ye(s==null?void 0:s.style,"style"),L=ye(s==null?void 0:s.target,"target");o&&(d.scene=o),r&&(d.angle=r),w&&(d.style=w),L&&(d.target=L)}catch{}}function rt(){const l=Be(E.value);l!==E.value&&(E.value=l),localStorage.setItem("ecommerce-image-prompt-template",l)}function dt(){const l=localStorage.getItem("ecommerce-image-prompt-template");l&&(E.value=Be(l))}function ut(){E.value=Ne,localStorage.removeItem("ecommerce-image-prompt-template"),G("提示词模板已重置为默认值","success")}function ct(){q.apiKey=localStorage.getItem("global_api_key")||localStorage.getItem("video_api_key")||"",q.baseUrl=localStorage.getItem("global_base_url")||localStorage.getItem("video_base_url")||""}async function pt(){if($.value)try{await navigator.clipboard.writeText($.value),G("提示词已复制到剪贴板","success")}catch{G("复制失败","error")}}async function Ee(){if(!(!Oe.value||B.value)){B.value=!0,J.value="";try{const l=Math.min(10,Math.max(1,Math.floor(Number(c.n)||1)));if(c.n=l,l>=6&&!confirm(`将并发生成 ${l} 张图片，确认继续？`))return;const e=new FormData;e.append("prompt",$.value),e.append("model",c.model),e.append("n",String(l)),e.append("response_format","url"),c.aspectRatio&&e.append("aspect_ratio",c.aspectRatio),c.imageSize&&e.append("image_size",c.imageSize);for(const le of C.value){const Ve=V.value.find(ze=>ze.id===le);if(Ve)try{const gt=await(await fetch(Ve.image_url)).blob();e.append("image",gt,`ref-${le}.jpg`)}catch{console.warn("Failed to fetch reference image:",Ve.image_url)}}const s={"X-CSRF-Token":Je()},o=Ze(q.apiKey);o&&(s["X-API-Key"]=o);const r=Qe(q.baseUrl);r&&(s["X-Base-Url"]=r);const w=await fetch("/api/v1/images/edits",{method:"POST",credentials:"include",headers:s,body:e});if(!w.ok){const le=await w.json().catch(()=>({}));throw new Error(le.detail||`HTTP ${w.status}`)}const L=await w.json(),De=L&&typeof L=="object"&&L.response?L.response:L,se=Me(De).length?Me(De):Me(L);if(se.length)Y.value=se,K.value=se[0]||"";else throw new Error("Invalid response format");G(se.length>1?`图片生成成功（${se.length}张）`:"图片生成成功","success")}catch(l){J.value=l.message||"生成失败，请重试"}finally{B.value=!1}}}function vt(){if(!K.value)return;const l=document.createElement("a");l.href=K.value,l.download=`ecommerce-${Date.now()}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}let mt=0;function G(l,e="info"){const s=mt++;de.value.push({id:s,message:l,type:e}),setTimeout(()=>{const o=de.value.findIndex(r=>r.id===s);o!==-1&&de.value.splice(o,1)},3e3)}return He(T,l=>{W.value="",l===2&&Te()}),He(Ae,l=>{T.value>l&&(T.value=l)}),ft(()=>{at(),dt(),ct(),ge(),Te(!0)}),(l,e)=>(i(),n("div",Tt,[e[84]||(e[84]=ne('<header class="header"><div class="logo"><div class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div><span>电商图生成</span></div><div class="header-actions"><a href="/" class="btn btn-secondary" style="text-decoration:none;display:flex;align-items:center;gap:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回主页面 </a></div></header>',1)),t("nav",St,[t("div",Bt,[(i(),n(_,null,x(X,s=>t("button",{key:s.id,class:k(["wizard-step",{active:T.value===s.id,completed:D(s.id),disabled:!Ue(s.id)}]),"aria-current":T.value===s.id?"step":void 0,"aria-disabled":!Ue(s.id),onClick:o=>Xe(s.id)},[t("span",Mt,[D(s.id)?(i(),n("svg",Pt,[...e[25]||(e[25]=[t("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(i(),n("span",Vt,a(s.id),1))]),t("span",zt,a(s.title),1)],10,Ut)),64))]),W.value?(i(),n("div",It,a(W.value),1)):u("",!0)]),t("div",Kt,[t("aside",jt,[t("section",Lt,[e[33]||(e[33]=ne('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg> Model Selection </div>',1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>c.model=s)},[...e[26]||(e[26]=[t("option",{value:"gemini-3-pro-image-preview"},"gemini-3-pro-image-preview (推荐)",-1),t("option",{value:"gemini-2.5-flash-image"},"gemini-2.5-flash-image (快速)",-1)])],512),[[Ie,c.model]]),t("div",Ot,[e[28]||(e[28]=t("label",{class:"form-label"},"Aspect Ratio",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=s=>c.aspectRatio=s)},[...e[27]||(e[27]=[ne('<option value="">Auto</option><option value="1:1">1:1 (Square)</option><option value="16:9">16:9 (Landscape)</option><option value="9:16">9:16 (Portrait)</option><option value="4:3">4:3</option><option value="3:4">3:4</option><option value="3:2">3:2</option><option value="2:3">2:3</option><option value="4:5">4:5</option><option value="5:4">5:4</option>',10)])],512),[[Ie,c.aspectRatio]])]),t("div",At,[e[30]||(e[30]=t("label",{class:"form-label"},"Image Size",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>c.imageSize=s)},[...e[29]||(e[29]=[t("option",{value:""},"Default",-1),t("option",{value:"1K"},"1K",-1),t("option",{value:"2K"},"2K",-1),t("option",{value:"4K"},"4K",-1)])],512),[[Ie,c.imageSize]])]),t("div",Et,[e[31]||(e[31]=t("label",{class:"form-label"},"并发数量",-1)),p(t("input",{class:"form-input",type:"number",min:"1",max:"10","onUpdate:modelValue":e[3]||(e[3]=s=>c.n=s)},null,512),[[U,c.n,void 0,{number:!0}]]),e[32]||(e[32]=t("div",{class:"form-hint"},"一次生成多张图片（1-10）",-1))])]),t("section",Dt,[e[39]||(e[39]=ne('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z"></path><path d="M9 2v5"></path><path d="M15 2v5"></path><path d="M2 9h20"></path></svg> 选择产品 </div>',1)),t("div",Ht,[e[34]||(e[34]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[4]||(e[4]=s=>ae.value=s),placeholder:"搜索产品...",onInput:We},null,544),[[U,ae.value]])]),!oe.value&&ie.value.length>0?(i(),n("div",Nt,[(i(!0),n(_,null,x(ie.value,s=>{var o;return i(),n("div",{key:s.id,class:k(["product-item",{selected:((o=I.value)==null?void 0:o.id)===s.id}]),onClick:r=>st(s)},[t("img",{src:tt(s),alt:s.name,class:"product-thumb"},null,8,Gt),t("div",Ft,[t("div",qt,a(s.name||"未命名产品"),1),t("div",Xt,a(s.dimensions||""),1)])],10,Rt)}),128))])):!oe.value&&ie.value.length===0?(i(),n("div",Jt,[...e[35]||(e[35]=[t("p",null,"暂无产品",-1),t("a",{href:"/products",class:"btn btn-secondary btn-sm"},"前往产品库",-1)])])):(i(),n("div",Zt,[...e[36]||(e[36]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载中...",-1)])])),xe.value>_e?(i(),n("div",Qt,[t("button",{class:"btn btn-ghost btn-sm",disabled:z.value<=1,onClick:Ye},[...e[37]||(e[37]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,Wt),t("span",Yt,a(z.value)+" / "+a(Ce.value),1),t("button",{class:"btn btn-ghost btn-sm",disabled:z.value>=Ce.value,onClick:et},[...e[38]||(e[38]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,es)])):u("",!0)]),I.value?(i(),n("section",ts,[t("div",ss,[e[40]||(e[40]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1)),F(" 参考图片 ("+a(C.value.length)+"/"+a(V.value.length)+") ",1)]),V.value.length>0?(i(),n("div",ls,[(i(!0),n(_,null,x(V.value,s=>(i(),n("div",{key:s.id,class:k(["image-item",{selected:C.value.includes(s.id)}]),onClick:o=>lt(s.id)},[t("img",{src:s.image_url,alt:"Product image"},null,8,is),C.value.includes(s.id)?(i(),n("div",os,[...e[41]||(e[41]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"3"},[t("polyline",{points:"20 6 9 17 4 12"})],-1)])])):u("",!0),s.is_primary?(i(),n("div",as,"主图")):u("",!0)],10,ns))),128))])):(i(),n("div",rs,[...e[42]||(e[42]=[t("p",null,"该产品暂无图片",-1)])]))])):u("",!0)]),t("main",ds,[Z(Ge,{name:"step-fade",mode:"out-in"},{default:M(()=>[T.value===1?(i(),n("section",us,[t("div",cs,[t("div",ps,[e[43]||(e[43]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"1"),t("div",null,[t("h3",null,"产品选择"),t("p",{class:"panel-subtitle"},"选择产品与参考图，并完善提示词字段")])],-1)),I.value?u("",!0):(i(),n("span",vs,"请先从左侧选择产品"))]),I.value?(i(),n("div",ms,[t("div",gs,[t("label",hs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>f.name=s)},null,512),[[ke,f.name]]),e[44]||(e[44]=t("span",null,"产品名称",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=s=>h.name=s),disabled:!f.name,placeholder:"例如：保温杯"},null,8,fs),[[U,h.name]])]),t("div",ys,[t("label",bs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>f.dimensions=s)},null,512),[[ke,f.dimensions]]),e[45]||(e[45]=t("span",null,"尺寸规格",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[8]||(e[8]=s=>h.dimensions=s),disabled:!f.dimensions,placeholder:"例如：500ml"},null,8,ks),[[U,h.dimensions]])]),t("div",ws,[t("label",_s,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=s=>f.features=s)},null,512),[[ke,f.features]]),e[46]||(e[46]=t("span",null,"功能特征",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[10]||(e[10]=s=>h.featuresText=s),disabled:!f.features,rows:"2",placeholder:"每行一个特征"},null,8,xs),[[U,h.featuresText]])]),t("div",Cs,[t("label",$s,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=s=>f.characteristics=s)},null,512),[[ke,f.characteristics]]),e[47]||(e[47]=t("span",null,"产品特点",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[12]||(e[12]=s=>h.characteristicsText=s),disabled:!f.characteristics,rows:"2",placeholder:"每行一个特点"},null,8,Ts),[[U,h.characteristicsText]])])])):(i(),n("div",Ss," 选择产品后将自动填充名称、规格与特征信息。 "))])])):T.value===2?(i(),n("section",Bs,[t("div",Us,[t("div",{class:"panel-header"},[e[49]||(e[49]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"2"),t("div",null,[t("h3",null,"模板配置"),t("p",{class:"panel-subtitle"},"点击标签可多选，支持就地编辑")])],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:ot},[...e[48]||(e[48]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),F(" 重置模板 ",-1)])])]),t("div",Ms,[Z(we,{title:"场景选择",summary:ce("scene"),open:A.scene,onToggle:e[14]||(e[14]=s=>pe("scene"))},{actions:M(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[13]||(e[13]=v(s=>fe("scene"),["stop"]))},[...e[50]||(e[50]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:M(()=>[t("div",Ps,[(i(!0),n(_,null,x(d.scene,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.scene.includes(s.id),editing:S("scene",s.id)}])},[S("scene",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:H,onKeydown:Q(v(H,["prevent"]),["enter"])},null,40,zs)),[[U,s.label]]):(i(),n("span",{key:0,onClick:o=>he("scene",s.id)},a(s.label),9,Vs)),S("scene",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:v(o=>te("scene",s.id),["stop"])},[...e[51]||(e[51]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Is)),t("button",{class:"chip-delete",onClick:v(o=>ee("scene",s.id),["stop"])},[...e[52]||(e[52]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Ks)],2))),128))])]),_:1},8,["summary","open"]),Z(we,{title:"拍摄角度",summary:ce("angle"),open:A.angle,onToggle:e[16]||(e[16]=s=>pe("angle"))},{actions:M(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[15]||(e[15]=v(s=>fe("angle"),["stop"]))},[...e[53]||(e[53]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:M(()=>[t("div",js,[(i(!0),n(_,null,x(d.angle,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.angle.includes(s.id),editing:S("angle",s.id)}])},[S("angle",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:H,onKeydown:Q(v(H,["prevent"]),["enter"])},null,40,Os)),[[U,s.label]]):(i(),n("span",{key:0,onClick:o=>he("angle",s.id)},a(s.label),9,Ls)),S("angle",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:v(o=>te("angle",s.id),["stop"])},[...e[54]||(e[54]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,As)),t("button",{class:"chip-delete",onClick:v(o=>ee("angle",s.id),["stop"])},[...e[55]||(e[55]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Es)],2))),128))])]),_:1},8,["summary","open"]),Z(we,{title:"风格 / 光影",summary:ce("style"),open:A.style,onToggle:e[18]||(e[18]=s=>pe("style"))},{"title-extra":M(()=>[...e[56]||(e[56]=[t("span",{class:"optional-tag"},"(可选)",-1)])]),actions:M(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[17]||(e[17]=v(s=>fe("style"),["stop"]))},[...e[57]||(e[57]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:M(()=>[t("div",Ds,[(i(!0),n(_,null,x(d.style,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.style.includes(s.id),editing:S("style",s.id)}])},[S("style",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:H,onKeydown:Q(v(H,["prevent"]),["enter"])},null,40,Ns)),[[U,s.label]]):(i(),n("span",{key:0,onClick:o=>he("style",s.id)},a(s.label),9,Hs)),S("style",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:v(o=>te("style",s.id),["stop"])},[...e[58]||(e[58]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Rs)),t("button",{class:"chip-delete",onClick:v(o=>ee("style",s.id),["stop"])},[...e[59]||(e[59]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Gs)],2))),128))])]),_:1},8,["summary","open"]),Z(we,{title:"生成目标",summary:ce("target"),open:A.target,onToggle:e[20]||(e[20]=s=>pe("target"))},{actions:M(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[19]||(e[19]=v(s=>fe("target"),["stop"]))},[...e[60]||(e[60]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:M(()=>[t("div",Fs,[(i(!0),n(_,null,x(d.target,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.target.includes(s.id),editing:S("target",s.id)}])},[S("target",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:H,onKeydown:Q(v(H,["prevent"]),["enter"])},null,40,Xs)),[[U,s.label]]):(i(),n("span",{key:0,onClick:o=>he("target",s.id)},a(s.label),9,qs)),S("target",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:v(o=>te("target",s.id),["stop"])},[...e[61]||(e[61]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Js)),t("button",{class:"chip-delete",onClick:v(o=>ee("target",s.id),["stop"])},[...e[62]||(e[62]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Zs)],2))),128))])]),_:1},8,["summary","open"])]),t("div",Qs,[t("div",{class:"template-editor-header"},[e[64]||(e[64]=t("div",null,[t("h4",null,"提示词模板"),t("p",{class:"template-editor-subtitle"},"系统会自动拼接已选信息，可补充额外描述")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:ut},[...e[63]||(e[63]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),F(" 重置模板 ",-1)])])]),t("div",Ws,[e[65]||(e[65]=t("div",{class:"template-editor-hint"}," 已选场景/角度等会自动生成，例如：场景：客厅，拍摄角度：正面。 ",-1)),p(t("textarea",{class:"form-input template-textarea","onUpdate:modelValue":e[21]||(e[21]=s=>E.value=s),rows:"4",placeholder:"补充提示词，如：高清产品摄影",onInput:rt},null,544),[[U,E.value]])])])])])):T.value===3?(i(),n("section",Ys,[t("div",el,[t("div",tl,[e[66]||(e[66]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"3"),t("div",null,[t("h3",null,"提示词预览"),t("p",{class:"panel-subtitle"},"分段预览并高亮关键信息")])],-1)),$.value?u("",!0):(i(),n("span",sl,"完善产品信息与模板后自动生成"))]),t("div",ll,[t("div",nl,[e[67]||(e[67]=t("span",{class:"prompt-label"},"产品信息",-1)),t("div",{class:k(["prompt-value",{empty:b.value.product.length===0}])},[b.value.product.length?(i(!0),n(_,{key:0},x(b.value.product,(s,o)=>(i(),n("span",{key:`product-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",il,"未选择或未填写"))],2)]),t("div",ol,[e[68]||(e[68]=t("span",{class:"prompt-label"},"场景",-1)),t("div",{class:k(["prompt-value",{empty:b.value.scene.length===0}])},[b.value.scene.length?(i(!0),n(_,{key:0},x(b.value.scene,(s,o)=>(i(),n("span",{key:`scene-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",al,"未选择场景"))],2)]),t("div",rl,[e[69]||(e[69]=t("span",{class:"prompt-label"},"角度",-1)),t("div",{class:k(["prompt-value",{empty:b.value.angle.length===0}])},[b.value.angle.length?(i(!0),n(_,{key:0},x(b.value.angle,(s,o)=>(i(),n("span",{key:`angle-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",dl,"未选择角度"))],2)]),t("div",ul,[e[70]||(e[70]=t("span",{class:"prompt-label"},"风格 / 光影",-1)),t("div",{class:k(["prompt-value",{empty:b.value.style.length===0}])},[b.value.style.length?(i(!0),n(_,{key:0},x(b.value.style,(s,o)=>(i(),n("span",{key:`style-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",cl,"未选择风格"))],2)]),t("div",pl,[e[71]||(e[71]=t("span",{class:"prompt-label"},"生成目标",-1)),t("div",{class:k(["prompt-value",{empty:b.value.target.length===0}])},[b.value.target.length?(i(!0),n(_,{key:0},x(b.value.target,(s,o)=>(i(),n("span",{key:`target-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",vl,"未选择目标"))],2)])]),t("div",ml,[t("div",gl,[e[73]||(e[73]=t("div",null,[t("h4",null,"完整 Prompt"),t("p",{class:"prompt-full-hint"},"可直接复制用于生成")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:pt,disabled:!$.value},[...e[72]||(e[72]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),F(" 复制 ",-1)])],8,hl)]),t("div",fl,[$.value?(i(),n("p",yl,a($.value),1)):(i(),n("p",bl,"选择产品和模板选项后，提示词将在这里生成。"))])])])])):(i(),n("section",kl,[t("div",wl,[t("div",_l,[e[74]||(e[74]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"4"),t("div",null,[t("h3",null,"生成与结果"),t("p",{class:"panel-subtitle"},"确认参考图与提示词后开始生成")])],-1)),me.value?(i(),n("span",xl,a(me.value),1)):u("",!0)]),t("div",Cl,[!B.value&&Y.value.length===0?(i(),n("div",$l,[...e[75]||(e[75]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),t("h3",null,"准备生成",-1),t("p",null,"选择产品、参考图片与模板选项，然后点击生成。",-1)])])):u("",!0),B.value?(i(),n("div",Tl,[...e[76]||(e[76]=[t("div",{class:"spinner"},null,-1),t("p",null,"正在生成图片...",-1)])])):u("",!0),Y.value.length&&!B.value?(i(),n("div",Sl,[t("img",{src:K.value,alt:"Generated image",class:"result-image"},null,8,Bl),Y.value.length>1?(i(),n("div",Ul,[(i(!0),n(_,null,x(Y.value,(s,o)=>(i(),n("button",{key:`${s}-${o}`,class:k(["result-thumb",{active:s===K.value}]),type:"button",onClick:r=>K.value=s},[t("img",{src:s,alt:`Generated ${o+1}`,loading:"lazy",decoding:"async"},null,8,Pl),t("span",Vl,a(o+1),1)],10,Ml))),128))])):u("",!0),t("div",{class:"result-actions"},[t("button",{class:"btn btn-secondary",onClick:vt},[...e[77]||(e[77]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),F(" 下载 ",-1)])]),t("button",{class:"btn btn-primary",onClick:Ee},[...e[78]||(e[78]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),F(" 重新生成 ",-1)])])])])):u("",!0)]),t("div",zl,[t("button",{class:"generate-btn",disabled:!Oe.value||B.value,onClick:Ee},[B.value?(i(),n("div",jl)):(i(),n("svg",Kl,[...e[79]||(e[79]=[t("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)])])),F(" "+a(B.value?"生成中...":"生成电商图"),1)],8,Il),me.value?(i(),n("div",Ll,a(me.value),1)):u("",!0)])])]))]),_:1})]),t("aside",Ol,[t("div",Al,[t("div",El,[e[80]||(e[80]=t("h4",null,"提示词预览",-1)),$.value?u("",!0):(i(),n("span",Dl,"完成前两步后显示"))]),t("div",Hl,[$.value?(i(),n("p",Nl,a($.value),1)):(i(),n("p",Rl,"选择产品与模板选项后生成提示词。"))])]),t("div",Gl,[e[82]||(e[82]=t("div",{class:"preview-card-header"},[t("h4",null,"生成结果")],-1)),t("div",Fl,[B.value?(i(),n("div",ql,[...e[81]||(e[81]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"正在生成...",-1)])])):K.value?(i(),n("div",Xl,[t("img",{src:K.value,alt:"Generated preview",class:"preview-image"},null,8,Jl)])):(i(),n("p",Zl,"生成完成后显示结果。"))])])])]),t("div",Ql,[(i(!0),n(_,null,x(de.value,s=>(i(),n("div",{key:s.id,class:k(["toast",s.type])},a(s.message),3))),128))]),J.value?(i(),n("div",{key:0,class:"error-overlay",onClick:e[24]||(e[24]=s=>J.value="")},[t("div",{class:"error-modal",onClick:e[23]||(e[23]=v(()=>{},["stop"]))},[e[83]||(e[83]=ne('<div class="error-header"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><h3>生成失败</h3></div>',1)),t("p",null,a(J.value),1),t("button",{class:"btn btn-primary",onClick:e[22]||(e[22]=s=>J.value="")},"确定")])])):u("",!0)]))}});bt(Wl).mount("#app");
