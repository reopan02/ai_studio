import{d as Ye,a as n,b as i,n as k,e as t,s as Y,l as ee,p as c,f as d,u as xe,t as a,T as et,x as P,w as g,v as Ct,m as F,r as v,c as K,y as _e,o as $t,z as Tt,g as ae,F as x,q as _,A as Ee,k as M,i as X,B as Ce,C as St,j as Bt}from"./runtime-dom.esm-bundler-BI5Nxju0.js";/* empty css                        */const Ut=["aria-expanded","onKeydown"],Mt={class:"collapsible-title"},Pt={class:"collapsible-title-text"},Vt={key:0,class:"collapsible-summary"},zt={class:"collapsible-actions"},It={class:"collapsible-body"},$e=Ye({__name:"CollapsibleGroup",props:{title:{},summary:{},open:{type:Boolean}},emits:["toggle"],setup(G,{emit:V}){const J=V;function p(){J("toggle")}return(Z,T)=>(i(),n("div",{class:k(["collapsible-group",{collapsed:!G.open}])},[t("div",{class:"collapsible-header",role:"button",tabindex:"0","aria-expanded":G.open,onClick:p,onKeydown:[ee(c(p,["prevent"]),["enter"]),ee(c(p,["prevent"]),["space"])]},[t("div",Mt,[t("span",Pt,a(G.title),1),xe(Z.$slots,"title-extra")]),G.open?d("",!0):(i(),n("div",Vt,[xe(Z.$slots,"summary",{},()=>[t("span",null,a(G.summary),1)])])),t("div",zt,[xe(Z.$slots,"actions"),T[0]||(T[0]=t("span",{class:"collapsible-toggle"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})])],-1))])],40,Ut),Y(et,{name:"collapse"},{default:P(()=>[g(t("div",It,[xe(Z.$slots,"default")],512),[[Ct,G.open]])]),_:3})],2))}}),Kt={class:"ecommerce-image-page"},Lt={class:"wizard-nav"},jt={class:"wizard-steps"},Et=["aria-current","aria-disabled","onClick"],Ot={class:"wizard-step-indicator"},At={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Dt={key:1},Ht={class:"wizard-step-label"},Rt={key:0,class:"wizard-step-hint"},Nt={class:"main-container"},Ft={class:"sidebar"},Gt={class:"sidebar-section"},qt={class:"form-group",style:{"margin-top":"16px"}},Xt={class:"form-group"},Jt={class:"form-group"},Zt={class:"sidebar-section"},Qt={class:"search-wrapper"},Wt={key:0,class:"product-list"},Yt=["onClick"],es=["src","alt"],ts={class:"product-info"},ss={class:"product-name"},ls={class:"product-meta"},ns={key:1,class:"product-list-empty"},is={key:2,class:"product-list-loading"},os={key:3,class:"pagination"},as=["disabled"],rs={class:"page-info"},ds=["disabled"],us={key:0,class:"sidebar-section"},cs={class:"section-title"},ps={key:0,class:"image-grid"},vs=["onClick"],gs=["src"],ms={key:0,class:"image-check"},hs={key:1,class:"image-primary"},fs={key:1,class:"no-images"},ys={class:"main-content"},bs={key:0,class:"workflow-section"},ks={class:"content-panel"},ws={class:"panel-header"},xs={key:0,class:"panel-hint"},_s={key:0,class:"product-fields"},Cs={class:"field-row"},$s={class:"field-checkbox"},Ts=["disabled"],Ss={class:"field-row"},Bs={class:"field-checkbox"},Us=["disabled"],Ms={class:"field-row"},Ps={class:"field-checkbox"},Vs=["disabled"],zs={class:"field-row"},Is={class:"field-checkbox"},Ks=["disabled"],Ls={key:1,class:"panel-empty"},js={key:1,class:"workflow-section"},Es={class:"content-panel"},Os={class:"template-modules"},As={class:"option-chips"},Ds=["onClick"],Hs=["onUpdate:modelValue","data-option-id","onKeydown"],Rs=["onClick"],Ns=["onClick"],Fs={class:"option-chips"},Gs=["onClick"],qs=["onUpdate:modelValue","data-option-id","onKeydown"],Xs=["onClick"],Js=["onClick"],Zs={class:"option-chips"},Qs=["onClick"],Ws=["onUpdate:modelValue","data-option-id","onKeydown"],Ys=["onClick"],el=["onClick"],tl={class:"option-chips"},sl=["onClick"],ll=["onUpdate:modelValue","data-option-id","onKeydown"],nl=["onClick"],il=["onClick"],ol={class:"template-editor"},al={class:"template-editor-section"},rl={key:2,class:"workflow-section"},dl={class:"content-panel prompt-preview-panel"},ul={class:"panel-header"},cl={key:0,class:"panel-hint"},pl={class:"prompt-structured"},vl={class:"prompt-row"},gl={key:1,class:"prompt-empty"},ml={class:"prompt-row"},hl={key:1,class:"prompt-empty"},fl={class:"prompt-row"},yl={key:1,class:"prompt-empty"},bl={class:"prompt-row"},kl={key:1,class:"prompt-empty"},wl={class:"prompt-row"},xl={key:1,class:"prompt-empty"},_l={class:"prompt-full"},Cl={class:"prompt-full-header"},$l=["disabled"],Tl={class:"prompt-full-body"},Sl={key:0},Bl={key:1,class:"prompt-placeholder"},Ul={key:3,class:"workflow-section"},Ml={class:"content-panel"},Pl={class:"panel-header"},Vl={key:0,class:"panel-hint"},zl={class:"result-area"},Il={key:0,class:"result-placeholder"},Kl={key:1,class:"loading-state"},Ll={key:2,class:"result-container"},jl=["src"],El={key:0,class:"result-grid"},Ol=["onClick"],Al=["src","alt"],Dl={class:"result-thumb-index"},Hl={class:"generate-section"},Rl=["disabled"],Nl={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Fl={key:1,class:"spinner-small"},Gl={key:0,class:"generate-hint"},ql={class:"preview-panel"},Xl={class:"preview-card"},Jl={class:"preview-card-header"},Zl={key:0,class:"preview-card-hint"},Ql={class:"preview-card-body"},Wl={key:0},Yl={key:1,class:"preview-placeholder"},en={class:"preview-card"},tn={class:"preview-card-body preview-result"},sn={key:0,class:"preview-loading"},ln={key:1},nn=["src"],on={key:2,class:"preview-placeholder"},an={class:"lightbox-body"},rn=["src"],dn={class:"lightbox-footer"},un={key:0,class:"lightbox-nav"},cn={class:"lightbox-index"},pn={class:"lightbox-actions"},vn={class:"toast-container"},We="高清产品摄影",Te=10,gn=Ye({__name:"ecommerce-image-page",setup(G){const V={scene:[{id:"scene-white",label:"白色背景"},{id:"scene-natural-table",label:"自然光桌面"},{id:"scene-outdoor",label:"户外场景"},{id:"scene-solid",label:"纯色背景"},{id:"scene-life",label:"生活场景"}],angle:[{id:"angle-front",label:"正面"},{id:"angle-45",label:"45度侧面"},{id:"angle-top",label:"俯视"},{id:"angle-eye",label:"平视"},{id:"angle-close",label:"特写"}],style:[{id:"style-soft",label:"柔和光影"},{id:"style-contrast",label:"高对比度"},{id:"style-natural",label:"自然光"},{id:"style-studio",label:"专业棚拍"},{id:"style-warm",label:"暖色调"}],target:[{id:"target-main",label:"主图"},{id:"target-detail",label:"详情页"},{id:"target-poster",label:"海报"},{id:"target-white",label:"白底图"},{id:"target-scene",label:"场景图"}]},J=F({apiKey:"",baseUrl:""}),p=F({model:"gemini-3-pro-image-preview",aspectRatio:"",imageSize:"1K",n:1}),Z=[{id:1,title:"选择产品"},{id:2,title:"配置模板"},{id:3,title:"预览提示词"},{id:4,title:"生成图片"}],T=v(1),te=v(""),re=v([]),de=v(!1),ue=v(""),L=v(1),Se=v(0),j=v(null),z=v([]),C=v([]),h=F({name:"",dimensions:"",featuresText:"",characteristicsText:""}),f=F({name:!0,dimensions:!0,features:!0,characteristics:!0}),u=F({scene:V.scene.map(l=>({...l})),angle:V.angle.map(l=>({...l})),style:V.style.map(l=>({...l})),target:V.target.map(l=>({...l}))}),m=F({scene:[],angle:[],style:[],target:[]}),D=F({scene:!0,angle:!1,style:!1,target:!1}),ce=v(!1),y=F({category:"",id:""}),H=v(We),U=v(!1),I=v(""),S=v([]),Q=v(""),pe=v([]),se=v(!1),E=v(0),Oe=K(()=>{const l=S.value;if(!l.length)return"";const e=Math.min(l.length-1,Math.max(0,E.value));return l[e]||""}),Be=K(()=>Math.ceil(Se.value/Te));function Ue(l){return globalThis.crypto&&"randomUUID"in globalThis.crypto?`${l}-${globalThis.crypto.randomUUID()}`:`${l}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function Ae(l){return l.split(`
`).map(e=>e.trim()).filter(Boolean)}function De(l){return l.filter(Boolean).join("、")}function ve(l){const e=new Set(m[l]);return u[l].filter(s=>e.has(s.id)).map(s=>s.label.trim()).filter(Boolean)}function B(l,e){return y.category===l&&y.id===e}const O=K(()=>({scene:ve("scene"),angle:ve("angle"),style:ve("style"),target:ve("target")})),tt=K(()=>m.scene.length>0||m.angle.length>0||m.style.length>0||m.target.length>0);function ge(l){const e=O.value[l];return e.length?e.length<=2?e.join("、"):`${e[0]}、${e[1]} 等${e.length}项`:"未选择"}function me(l){D[l]=!D[l],ce.value=!0}function Me(l=!1){if(ce.value&&!l)return;const e=["scene","angle","style","target"];let s=!1;e.forEach(o=>{!s&&m[o].length===0?(D[o]=!0,s=!0):D[o]=!1}),ce.value=!1}const Pe=K(()=>{const l=[],e=h.name.trim(),s=h.dimensions.trim();return f.name&&e&&l.push(e),f.dimensions&&s&&l.push(s),f.features&&l.push(...Ae(h.featuresText)),f.characteristics&&l.push(...Ae(h.characteristicsText)),l}),b=K(()=>({product:Pe.value,scene:O.value.scene,angle:O.value.angle,style:O.value.style,target:O.value.target}));function he(l,e){return e.length?`${l}：${De(e)}`:""}function He(l){return l.replace(/[，、]{2,}/g,"，").replace(/^[，、\s]+/,"").replace(/[，、\s]+$/,"").replace(/\s*[，、]\s*/g,"，").trim()}function Ve(l){if(!l)return"";const e=l.trim();if(!e.includes("{{"))return e;const s=e.replace(/\{\{(\w+)(?:\|([^}]*))?\}\}/g,(o,r,w)=>w??"");return He(s)}const $=K(()=>{if(!j.value)return"";const l=[];Pe.value.length&&l.push(De(Pe.value));const e=he("场景",O.value.scene);e&&l.push(e);const s=he("拍摄角度",O.value.angle);s&&l.push(s);const o=he("风格",O.value.style);o&&l.push(o);const r=he("生成目标",O.value.target);r&&l.push(r);const w=Ve(H.value);return w&&l.push(w),He(l.join("，"))}),Re=K(()=>j.value&&C.value.length>0&&$.value.length>0),fe=K(()=>U.value?"正在生成图片...":j.value?C.value.length===0?"请选择至少一张参考图片":$.value?"":"请完善模板选项或产品信息":"请先在左侧选择产品");function R(l){return l===1?!!j.value&&C.value.length>0:l===2?tt.value:l===3?$.value.length>0:l===4?I.value.length>0:!1}const Ne=K(()=>R(1)?R(2)?R(3)?4:3:2:1);function ze(l){return l<=Ne.value}function st(){return R(1)?R(2)?R(3)?"请先完成前置步骤":"请先完成步骤3：完善提示词预览":"请先完成步骤2：至少选择一个模板选项":"请先完成步骤1：选择产品并勾选参考图"}function lt(l){if(ze(l)){T.value=l,te.value="";return}te.value=st()}function nt(){const l=document.cookie.match(/csrf_token=([^;]+)/);return l?l[1]:""}function it(l){return String(l||"").trim().replace(/^bearer\s+/i,"").trim()}function ot(l){return String(l||"").trim()||null}function Ie(l){if(!l||typeof l!="object")return[];const e=[];if(Array.isArray(l.data))for(const s of l.data)!s||typeof s!="object"||(typeof s.url=="string"&&s.url?e.push(s.url):typeof s.b64_json=="string"&&s.b64_json?e.push(`data:image/png;base64,${s.b64_json}`):typeof s.image_url=="string"&&s.image_url?e.push(s.image_url):typeof s.imageUrl=="string"&&s.imageUrl&&e.push(s.imageUrl));return typeof l.url=="string"&&l.url&&e.push(l.url),typeof l.b64_json=="string"&&l.b64_json&&e.push(`data:image/png;base64,${l.b64_json}`),typeof l.image_url=="string"&&l.image_url&&e.push(l.image_url),typeof l.imageUrl=="string"&&l.imageUrl&&e.push(l.imageUrl),Array.from(new Set(e))}async function ye(){de.value=!0;try{const l=new URLSearchParams({offset:String((L.value-1)*Te),limit:String(Te)});ue.value&&l.set("name",ue.value);const e=await fetch(`/api/v1/products?${l}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch products");const s=await e.json();re.value=s.products||[],Se.value=s.total||0}catch{q("加载产品列表失败","error")}finally{de.value=!1}}function at(){L.value=1,ye()}function rt(){L.value>1&&(L.value--,ye())}function dt(){L.value<Be.value&&(L.value++,ye())}function ut(l){if(l.images&&l.images.length>0){const e=l.images.find(s=>s.is_primary);return e?e.image_url:l.images[0].image_url}return l.original_image_url||"/static/placeholder.png"}async function ct(l){j.value=l;try{const e=await fetch(`/api/v1/products/${l.id}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to load product details");const s=await e.json();h.name=s.name||"",h.dimensions=s.dimensions||"",h.featuresText=(s.features||[]).join(`
`),h.characteristicsText=(s.characteristics||[]).join(`
`),z.value=s.images||[],z.value.length===0&&s.original_image_url&&(z.value=[{id:s.id,image_url:s.original_image_url,is_primary:!0}]);const o=z.value.find(r=>r.is_primary);o?C.value=[o.id]:z.value.length>0?C.value=[z.value[0].id]:C.value=[]}catch{q("加载产品详情失败","error")}}function pt(l){const e=C.value.indexOf(l);e===-1?C.value.push(l):C.value.splice(e,1)}function vt(l,e){return u[l].find(s=>s.id===e)??null}function gt(l){St(()=>{const e=document.querySelector(`.option-edit-input[data-option-id="${l}"]`);e&&(e.focus(),e.select())})}function be(l,e){const s=m[l],o=s.indexOf(e);o===-1?s.push(e):s.splice(o,1)}function ke(l){const e={id:Ue(l),label:"新选项"};u[l].push(e),Ke(),ne(l,e.id)}function le(l,e){const s=u[l].findIndex(r=>r.id===e);if(s===-1)return;u[l].splice(s,1);const o=m[l].indexOf(e);o!==-1&&m[l].splice(o,1),y.category===l&&y.id===e&&(y.category="",y.id=""),Ke()}function ne(l,e){y.category=l,y.id=e,gt(e)}function N(){if(!y.category||!y.id)return;const l=y.category,e=y.id;y.category="",y.id="";const s=vt(l,e);if(!s)return;const o=s.label.trim();if(!o){le(l,e);return}s.label=o,Ke()}function mt(){u.scene=V.scene.map(l=>({...l})),u.angle=V.angle.map(l=>({...l})),u.style=V.style.map(l=>({...l})),u.target=V.target.map(l=>({...l})),m.scene=[],m.angle=[],m.style=[],m.target=[],y.category="",y.id="",ce.value=!1,Me(!0),localStorage.removeItem("ecommerce-image-templates"),q("模板已重置为默认值","success")}function Ke(){const l={version:2,templates:{scene:u.scene.map(e=>({id:e.id,label:e.label})),angle:u.angle.map(e=>({id:e.id,label:e.label})),style:u.style.map(e=>({id:e.id,label:e.label})),target:u.target.map(e=>({id:e.id,label:e.label}))}};localStorage.setItem("ecommerce-image-templates",JSON.stringify(l))}function we(l,e){if(!Array.isArray(l))return null;const s=[];for(const o of l){if(typeof o=="string"){const r=o.trim();r&&s.push({id:Ue(e),label:r});continue}if(o&&typeof o=="object"){const r=typeof o.label=="string"?o.label.trim():"";if(!r)continue;const w=typeof o.id=="string"?String(o.id):Ue(e);s.push({id:w,label:r})}}return s.length?s:null}function ht(){const l=localStorage.getItem("ecommerce-image-templates");if(l)try{const e=JSON.parse(l),s=(e==null?void 0:e.templates)||e,o=we(s==null?void 0:s.scene,"scene"),r=we(s==null?void 0:s.angle,"angle"),w=we(s==null?void 0:s.style,"style"),A=we(s==null?void 0:s.target,"target");o&&(u.scene=o),r&&(u.angle=r),w&&(u.style=w),A&&(u.target=A)}catch{}}function ft(){const l=Ve(H.value);l!==H.value&&(H.value=l),localStorage.setItem("ecommerce-image-prompt-template",l)}function yt(){const l=localStorage.getItem("ecommerce-image-prompt-template");l&&(H.value=Ve(l))}function bt(){H.value=We,localStorage.removeItem("ecommerce-image-prompt-template"),q("提示词模板已重置为默认值","success")}function kt(){J.apiKey=localStorage.getItem("global_api_key")||localStorage.getItem("video_api_key")||"",J.baseUrl=localStorage.getItem("global_base_url")||localStorage.getItem("video_base_url")||""}async function wt(){if($.value)try{await navigator.clipboard.writeText($.value),q("提示词已复制到剪贴板","success")}catch{q("复制失败","error")}}async function Fe(){if(!(!Re.value||U.value)){U.value=!0,Q.value="",W();try{const l=Math.min(10,Math.max(1,Math.floor(Number(p.n)||1)));if(p.n=l,l>=6&&!confirm(`将并发生成 ${l} 张图片，确认继续？`))return;const e=new FormData;e.append("prompt",$.value),e.append("model",p.model),e.append("n",String(l)),e.append("response_format","url"),p.aspectRatio&&e.append("aspect_ratio",p.aspectRatio),p.imageSize&&e.append("image_size",p.imageSize);for(const oe of C.value){const Le=z.value.find(je=>je.id===oe);if(Le)try{const _t=await(await fetch(Le.image_url)).blob();e.append("image",_t,`ref-${oe}.jpg`)}catch{console.warn("Failed to fetch reference image:",Le.image_url)}}const s={"X-CSRF-Token":nt()},o=it(J.apiKey);o&&(s["X-API-Key"]=o);const r=ot(J.baseUrl);r&&(s["X-Base-Url"]=r);const w=await fetch("/api/v1/images/edits",{method:"POST",credentials:"include",headers:s,body:e});if(!w.ok){const oe=await w.json().catch(()=>({}));throw new Error(oe.detail||`HTTP ${w.status}`)}const A=await w.json(),Qe=A&&typeof A=="object"&&A.response?A.response:A,ie=Ie(Qe).length?Ie(Qe):Ie(A);if(ie.length)S.value=ie,I.value=ie[0]||"";else throw new Error("Invalid response format");q(ie.length>1?`图片生成成功（${ie.length}张）`:"图片生成成功","success")}catch(l){Q.value=l.message||"生成失败，请重试"}finally{U.value=!1}}}function Ge(l){const e=l||I.value;if(!e)return;const s=document.createElement("a");s.href=e,s.download=`ecommerce-${Date.now()}.png`,document.body.appendChild(s),s.click(),document.body.removeChild(s)}function qe(l){const e=S.value;if(!e.length)return;const s=l?e.indexOf(l):-1;E.value=s>=0?s:0,se.value=!0}function W(){se.value=!1}function Xe(){const l=S.value.length;l<=1||(E.value=(E.value-1+l)%l)}function Je(){const l=S.value.length;l<=1||(E.value=(E.value+1)%l)}function Ze(l){if(se.value){if(l.key==="Escape"){l.preventDefault(),W();return}if(l.key==="ArrowLeft"){l.preventDefault(),Xe();return}l.key==="ArrowRight"&&(l.preventDefault(),Je())}}let xt=0;function q(l,e="info"){const s=xt++;pe.value.push({id:s,message:l,type:e}),setTimeout(()=>{const o=pe.value.findIndex(r=>r.id===s);o!==-1&&pe.value.splice(o,1)},3e3)}return _e(T,l=>{te.value="",l===2&&Me()}),_e(Ne,l=>{T.value>l&&(T.value=l)}),$t(()=>{ht(),yt(),kt(),ye(),Me(!0),document.addEventListener("keydown",Ze)}),Tt(()=>{document.removeEventListener("keydown",Ze)}),_e(se,l=>{document.body.style.overflow=l?"hidden":""}),_e(S,l=>{if(!l.length){W();return}E.value>=l.length&&(E.value=0)}),(l,e)=>(i(),n("div",Kt,[e[90]||(e[90]=ae('<header class="header"><div class="logo"><div class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div><span>电商图生成</span></div><div class="header-actions"><a href="/" class="btn btn-secondary" style="text-decoration:none;display:flex;align-items:center;gap:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回主页面 </a></div></header>',1)),t("nav",Lt,[t("div",jt,[(i(),n(x,null,_(Z,s=>t("button",{key:s.id,class:k(["wizard-step",{active:T.value===s.id,completed:R(s.id),disabled:!ze(s.id)}]),"aria-current":T.value===s.id?"step":void 0,"aria-disabled":!ze(s.id),onClick:o=>lt(s.id)},[t("span",Ot,[R(s.id)?(i(),n("svg",At,[...e[29]||(e[29]=[t("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(i(),n("span",Dt,a(s.id),1))]),t("span",Ht,a(s.title),1)],10,Et)),64))]),te.value?(i(),n("div",Rt,a(te.value),1)):d("",!0)]),t("div",Nt,[t("aside",Ft,[t("section",Gt,[e[37]||(e[37]=ae('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg> Model Selection </div>',1)),g(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>p.model=s)},[...e[30]||(e[30]=[t("option",{value:"gemini-3-pro-image-preview"},"gemini-3-pro-image-preview (推荐)",-1),t("option",{value:"gemini-2.5-flash-image"},"gemini-2.5-flash-image (快速)",-1)])],512),[[Ee,p.model]]),t("div",qt,[e[32]||(e[32]=t("label",{class:"form-label"},"Aspect Ratio",-1)),g(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=s=>p.aspectRatio=s)},[...e[31]||(e[31]=[ae('<option value="">Auto</option><option value="1:1">1:1 (Square)</option><option value="16:9">16:9 (Landscape)</option><option value="9:16">9:16 (Portrait)</option><option value="4:3">4:3</option><option value="3:4">3:4</option><option value="3:2">3:2</option><option value="2:3">2:3</option><option value="4:5">4:5</option><option value="5:4">5:4</option>',10)])],512),[[Ee,p.aspectRatio]])]),t("div",Xt,[e[34]||(e[34]=t("label",{class:"form-label"},"Image Size",-1)),g(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>p.imageSize=s)},[...e[33]||(e[33]=[t("option",{value:""},"Default",-1),t("option",{value:"1K"},"1K",-1),t("option",{value:"2K"},"2K",-1),t("option",{value:"4K"},"4K",-1)])],512),[[Ee,p.imageSize]])]),t("div",Jt,[e[35]||(e[35]=t("label",{class:"form-label"},"并发数量",-1)),g(t("input",{class:"form-input",type:"number",min:"1",max:"10","onUpdate:modelValue":e[3]||(e[3]=s=>p.n=s)},null,512),[[M,p.n,void 0,{number:!0}]]),e[36]||(e[36]=t("div",{class:"form-hint"},"一次生成多张图片（1-10）",-1))])]),t("section",Zt,[e[43]||(e[43]=ae('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z"></path><path d="M9 2v5"></path><path d="M15 2v5"></path><path d="M2 9h20"></path></svg> 选择产品 </div>',1)),t("div",Qt,[e[38]||(e[38]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),g(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[4]||(e[4]=s=>ue.value=s),placeholder:"搜索产品...",onInput:at},null,544),[[M,ue.value]])]),!de.value&&re.value.length>0?(i(),n("div",Wt,[(i(!0),n(x,null,_(re.value,s=>{var o;return i(),n("div",{key:s.id,class:k(["product-item",{selected:((o=j.value)==null?void 0:o.id)===s.id}]),onClick:r=>ct(s)},[t("img",{src:ut(s),alt:s.name,class:"product-thumb"},null,8,es),t("div",ts,[t("div",ss,a(s.name||"未命名产品"),1),t("div",ls,a(s.dimensions||""),1)])],10,Yt)}),128))])):!de.value&&re.value.length===0?(i(),n("div",ns,[...e[39]||(e[39]=[t("p",null,"暂无产品",-1),t("a",{href:"/products",class:"btn btn-secondary btn-sm"},"前往产品库",-1)])])):(i(),n("div",is,[...e[40]||(e[40]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载中...",-1)])])),Se.value>Te?(i(),n("div",os,[t("button",{class:"btn btn-ghost btn-sm",disabled:L.value<=1,onClick:rt},[...e[41]||(e[41]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,as),t("span",rs,a(L.value)+" / "+a(Be.value),1),t("button",{class:"btn btn-ghost btn-sm",disabled:L.value>=Be.value,onClick:dt},[...e[42]||(e[42]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,ds)])):d("",!0)]),j.value?(i(),n("section",us,[t("div",cs,[e[44]||(e[44]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1)),X(" 参考图片 ("+a(C.value.length)+"/"+a(z.value.length)+") ",1)]),z.value.length>0?(i(),n("div",ps,[(i(!0),n(x,null,_(z.value,s=>(i(),n("div",{key:s.id,class:k(["image-item",{selected:C.value.includes(s.id)}]),onClick:o=>pt(s.id)},[t("img",{src:s.image_url,alt:"Product image"},null,8,gs),C.value.includes(s.id)?(i(),n("div",ms,[...e[45]||(e[45]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"3"},[t("polyline",{points:"20 6 9 17 4 12"})],-1)])])):d("",!0),s.is_primary?(i(),n("div",hs,"主图")):d("",!0)],10,vs))),128))])):(i(),n("div",fs,[...e[46]||(e[46]=[t("p",null,"该产品暂无图片",-1)])]))])):d("",!0)]),t("main",ys,[Y(et,{name:"step-fade",mode:"out-in"},{default:P(()=>[T.value===1?(i(),n("section",bs,[t("div",ks,[t("div",ws,[e[47]||(e[47]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"1"),t("div",null,[t("h3",null,"产品选择"),t("p",{class:"panel-subtitle"},"选择产品与参考图，并完善提示词字段")])],-1)),j.value?d("",!0):(i(),n("span",xs,"请先从左侧选择产品"))]),j.value?(i(),n("div",_s,[t("div",Cs,[t("label",$s,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>f.name=s)},null,512),[[Ce,f.name]]),e[48]||(e[48]=t("span",null,"产品名称",-1))]),g(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[6]||(e[6]=s=>h.name=s),disabled:!f.name,placeholder:"例如：保温杯"},null,8,Ts),[[M,h.name]])]),t("div",Ss,[t("label",Bs,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[7]||(e[7]=s=>f.dimensions=s)},null,512),[[Ce,f.dimensions]]),e[49]||(e[49]=t("span",null,"尺寸规格",-1))]),g(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[8]||(e[8]=s=>h.dimensions=s),disabled:!f.dimensions,placeholder:"例如：500ml"},null,8,Us),[[M,h.dimensions]])]),t("div",Ms,[t("label",Ps,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[9]||(e[9]=s=>f.features=s)},null,512),[[Ce,f.features]]),e[50]||(e[50]=t("span",null,"功能特征",-1))]),g(t("textarea",{class:"form-input","onUpdate:modelValue":e[10]||(e[10]=s=>h.featuresText=s),disabled:!f.features,rows:"2",placeholder:"每行一个特征"},null,8,Vs),[[M,h.featuresText]])]),t("div",zs,[t("label",Is,[g(t("input",{type:"checkbox","onUpdate:modelValue":e[11]||(e[11]=s=>f.characteristics=s)},null,512),[[Ce,f.characteristics]]),e[51]||(e[51]=t("span",null,"产品特点",-1))]),g(t("textarea",{class:"form-input","onUpdate:modelValue":e[12]||(e[12]=s=>h.characteristicsText=s),disabled:!f.characteristics,rows:"2",placeholder:"每行一个特点"},null,8,Ks),[[M,h.characteristicsText]])])])):(i(),n("div",Ls," 选择产品后将自动填充名称、规格与特征信息。 "))])])):T.value===2?(i(),n("section",js,[t("div",Es,[t("div",{class:"panel-header"},[e[53]||(e[53]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"2"),t("div",null,[t("h3",null,"模板配置"),t("p",{class:"panel-subtitle"},"点击标签可多选，支持就地编辑")])],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:mt},[...e[52]||(e[52]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),X(" 重置模板 ",-1)])])]),t("div",Os,[Y($e,{title:"场景选择",summary:ge("scene"),open:D.scene,onToggle:e[14]||(e[14]=s=>me("scene"))},{actions:P(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[13]||(e[13]=c(s=>ke("scene"),["stop"]))},[...e[54]||(e[54]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:P(()=>[t("div",As,[(i(!0),n(x,null,_(u.scene,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.scene.includes(s.id),editing:B("scene",s.id)}])},[B("scene",s.id)?g((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:N,onKeydown:ee(c(N,["prevent"]),["enter"])},null,40,Hs)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>be("scene",s.id)},a(s.label),9,Ds)),B("scene",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:c(o=>ne("scene",s.id),["stop"])},[...e[55]||(e[55]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Rs)),t("button",{class:"chip-delete",onClick:c(o=>le("scene",s.id),["stop"])},[...e[56]||(e[56]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Ns)],2))),128))])]),_:1},8,["summary","open"]),Y($e,{title:"拍摄角度",summary:ge("angle"),open:D.angle,onToggle:e[16]||(e[16]=s=>me("angle"))},{actions:P(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[15]||(e[15]=c(s=>ke("angle"),["stop"]))},[...e[57]||(e[57]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:P(()=>[t("div",Fs,[(i(!0),n(x,null,_(u.angle,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.angle.includes(s.id),editing:B("angle",s.id)}])},[B("angle",s.id)?g((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:N,onKeydown:ee(c(N,["prevent"]),["enter"])},null,40,qs)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>be("angle",s.id)},a(s.label),9,Gs)),B("angle",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:c(o=>ne("angle",s.id),["stop"])},[...e[58]||(e[58]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Xs)),t("button",{class:"chip-delete",onClick:c(o=>le("angle",s.id),["stop"])},[...e[59]||(e[59]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Js)],2))),128))])]),_:1},8,["summary","open"]),Y($e,{title:"风格 / 光影",summary:ge("style"),open:D.style,onToggle:e[18]||(e[18]=s=>me("style"))},{"title-extra":P(()=>[...e[60]||(e[60]=[t("span",{class:"optional-tag"},"(可选)",-1)])]),actions:P(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[17]||(e[17]=c(s=>ke("style"),["stop"]))},[...e[61]||(e[61]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:P(()=>[t("div",Zs,[(i(!0),n(x,null,_(u.style,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.style.includes(s.id),editing:B("style",s.id)}])},[B("style",s.id)?g((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:N,onKeydown:ee(c(N,["prevent"]),["enter"])},null,40,Ws)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>be("style",s.id)},a(s.label),9,Qs)),B("style",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:c(o=>ne("style",s.id),["stop"])},[...e[62]||(e[62]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Ys)),t("button",{class:"chip-delete",onClick:c(o=>le("style",s.id),["stop"])},[...e[63]||(e[63]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,el)],2))),128))])]),_:1},8,["summary","open"]),Y($e,{title:"生成目标",summary:ge("target"),open:D.target,onToggle:e[20]||(e[20]=s=>me("target"))},{actions:P(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[19]||(e[19]=c(s=>ke("target"),["stop"]))},[...e[64]||(e[64]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:P(()=>[t("div",tl,[(i(!0),n(x,null,_(u.target,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:m.target.includes(s.id),editing:B("target",s.id)}])},[B("target",s.id)?g((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:N,onKeydown:ee(c(N,["prevent"]),["enter"])},null,40,ll)),[[M,s.label]]):(i(),n("span",{key:0,onClick:o=>be("target",s.id)},a(s.label),9,sl)),B("target",s.id)?d("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:c(o=>ne("target",s.id),["stop"])},[...e[65]||(e[65]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,nl)),t("button",{class:"chip-delete",onClick:c(o=>le("target",s.id),["stop"])},[...e[66]||(e[66]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,il)],2))),128))])]),_:1},8,["summary","open"])]),t("div",ol,[t("div",{class:"template-editor-header"},[e[68]||(e[68]=t("div",null,[t("h4",null,"提示词模板"),t("p",{class:"template-editor-subtitle"},"系统会自动拼接已选信息，可补充额外描述")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:bt},[...e[67]||(e[67]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),X(" 重置模板 ",-1)])])]),t("div",al,[e[69]||(e[69]=t("div",{class:"template-editor-hint"}," 已选场景/角度等会自动生成，例如：场景：客厅，拍摄角度：正面。 ",-1)),g(t("textarea",{class:"form-input template-textarea","onUpdate:modelValue":e[21]||(e[21]=s=>H.value=s),rows:"4",placeholder:"补充提示词，如：高清产品摄影",onInput:ft},null,544),[[M,H.value]])])])])])):T.value===3?(i(),n("section",rl,[t("div",dl,[t("div",ul,[e[70]||(e[70]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"3"),t("div",null,[t("h3",null,"提示词预览"),t("p",{class:"panel-subtitle"},"分段预览并高亮关键信息")])],-1)),$.value?d("",!0):(i(),n("span",cl,"完善产品信息与模板后自动生成"))]),t("div",pl,[t("div",vl,[e[71]||(e[71]=t("span",{class:"prompt-label"},"产品信息",-1)),t("div",{class:k(["prompt-value",{empty:b.value.product.length===0}])},[b.value.product.length?(i(!0),n(x,{key:0},_(b.value.product,(s,o)=>(i(),n("span",{key:`product-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",gl,"未选择或未填写"))],2)]),t("div",ml,[e[72]||(e[72]=t("span",{class:"prompt-label"},"场景",-1)),t("div",{class:k(["prompt-value",{empty:b.value.scene.length===0}])},[b.value.scene.length?(i(!0),n(x,{key:0},_(b.value.scene,(s,o)=>(i(),n("span",{key:`scene-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",hl,"未选择场景"))],2)]),t("div",fl,[e[73]||(e[73]=t("span",{class:"prompt-label"},"角度",-1)),t("div",{class:k(["prompt-value",{empty:b.value.angle.length===0}])},[b.value.angle.length?(i(!0),n(x,{key:0},_(b.value.angle,(s,o)=>(i(),n("span",{key:`angle-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",yl,"未选择角度"))],2)]),t("div",bl,[e[74]||(e[74]=t("span",{class:"prompt-label"},"风格 / 光影",-1)),t("div",{class:k(["prompt-value",{empty:b.value.style.length===0}])},[b.value.style.length?(i(!0),n(x,{key:0},_(b.value.style,(s,o)=>(i(),n("span",{key:`style-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",kl,"未选择风格"))],2)]),t("div",wl,[e[75]||(e[75]=t("span",{class:"prompt-label"},"生成目标",-1)),t("div",{class:k(["prompt-value",{empty:b.value.target.length===0}])},[b.value.target.length?(i(!0),n(x,{key:0},_(b.value.target,(s,o)=>(i(),n("span",{key:`target-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",xl,"未选择目标"))],2)])]),t("div",_l,[t("div",Cl,[e[77]||(e[77]=t("div",null,[t("h4",null,"完整 Prompt"),t("p",{class:"prompt-full-hint"},"可直接复制用于生成")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:wt,disabled:!$.value},[...e[76]||(e[76]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),X(" 复制 ",-1)])],8,$l)]),t("div",Tl,[$.value?(i(),n("p",Sl,a($.value),1)):(i(),n("p",Bl,"选择产品和模板选项后，提示词将在这里生成。"))])])])])):(i(),n("section",Ul,[t("div",Ml,[t("div",Pl,[e[78]||(e[78]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"4"),t("div",null,[t("h3",null,"生成与结果"),t("p",{class:"panel-subtitle"},"确认参考图与提示词后开始生成")])],-1)),fe.value?(i(),n("span",Vl,a(fe.value),1)):d("",!0)]),t("div",zl,[!U.value&&S.value.length===0?(i(),n("div",Il,[...e[79]||(e[79]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),t("h3",null,"准备生成",-1),t("p",null,"选择产品、参考图片与模板选项，然后点击生成。",-1)])])):d("",!0),U.value?(i(),n("div",Kl,[...e[80]||(e[80]=[t("div",{class:"spinner"},null,-1),t("p",null,"正在生成图片...",-1)])])):d("",!0),S.value.length&&!U.value?(i(),n("div",Ll,[t("img",{src:I.value,alt:"Generated image",class:"result-image",onClick:e[22]||(e[22]=s=>qe(I.value))},null,8,jl),S.value.length>1?(i(),n("div",El,[(i(!0),n(x,null,_(S.value,(s,o)=>(i(),n("button",{key:`${s}-${o}`,class:k(["result-thumb",{active:s===I.value}]),type:"button",onClick:r=>I.value=s},[t("img",{src:s,alt:`Generated ${o+1}`,loading:"lazy",decoding:"async"},null,8,Al),t("span",Dl,a(o+1),1)],10,Ol))),128))])):d("",!0),t("div",{class:"result-actions"},[t("button",{class:"btn btn-secondary",onClick:Ge},[...e[81]||(e[81]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),X(" 下载 ",-1)])]),t("button",{class:"btn btn-primary",onClick:Fe},[...e[82]||(e[82]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),X(" 重新生成 ",-1)])])])])):d("",!0)]),t("div",Hl,[t("button",{class:"generate-btn",disabled:!Re.value||U.value,onClick:Fe},[U.value?(i(),n("div",Fl)):(i(),n("svg",Nl,[...e[83]||(e[83]=[t("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)])])),X(" "+a(U.value?"生成中...":"生成电商图"),1)],8,Rl),fe.value?(i(),n("div",Gl,a(fe.value),1)):d("",!0)])])]))]),_:1})]),t("aside",ql,[t("div",Xl,[t("div",Jl,[e[84]||(e[84]=t("h4",null,"提示词预览",-1)),$.value?d("",!0):(i(),n("span",Zl,"完成前两步后显示"))]),t("div",Ql,[$.value?(i(),n("p",Wl,a($.value),1)):(i(),n("p",Yl,"选择产品与模板选项后生成提示词。"))])]),t("div",en,[e[86]||(e[86]=t("div",{class:"preview-card-header"},[t("h4",null,"生成结果")],-1)),t("div",tn,[U.value?(i(),n("div",sn,[...e[85]||(e[85]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"正在生成...",-1)])])):I.value?(i(),n("div",ln,[t("img",{src:I.value,alt:"Generated preview",class:"preview-image",onClick:e[23]||(e[23]=s=>qe(I.value))},null,8,nn)])):(i(),n("p",on,"生成完成后显示结果。"))])])])]),se.value?(i(),n("div",{key:0,class:"lightbox-overlay",onClick:W},[t("div",{class:"lightbox-content",onClick:e[25]||(e[25]=c(()=>{},["stop"]))},[t("div",{class:"lightbox-header"},[e[88]||(e[88]=t("div",{class:"lightbox-title"},"放大预览",-1)),t("button",{class:"btn btn-ghost btn-icon",type:"button",onClick:W,"aria-label":"Close preview"},[...e[87]||(e[87]=[t("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",an,[t("img",{src:Oe.value,alt:"Full size preview"},null,8,rn)]),t("div",dn,[S.value.length>1?(i(),n("div",un,[t("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:Xe},"上一张"),t("span",cn,a(E.value+1)+" / "+a(S.value.length),1),t("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:Je},"下一张")])):d("",!0),t("div",pn,[t("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:e[24]||(e[24]=s=>Ge(Oe.value))},"下载"),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:W},"关闭")])])])])):d("",!0),t("div",vn,[(i(!0),n(x,null,_(pe.value,s=>(i(),n("div",{key:s.id,class:k(["toast",s.type])},a(s.message),3))),128))]),Q.value?(i(),n("div",{key:1,class:"error-overlay",onClick:e[28]||(e[28]=s=>Q.value="")},[t("div",{class:"error-modal",onClick:e[27]||(e[27]=c(()=>{},["stop"]))},[e[89]||(e[89]=ae('<div class="error-header"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><h3>生成失败</h3></div>',1)),t("p",null,a(Q.value),1),t("button",{class:"btn btn-primary",onClick:e[26]||(e[26]=s=>Q.value="")},"确定")])])):d("",!0)]))}});Bt(gn).mount("#app");
