import{d as et,a as n,b as i,n as k,e as t,s as se,l as ae,q as m,f as u,u as _e,t as a,T as tt,x as z,w as p,v as zt,m as G,r as d,c as U,y as Qe,o as Et,g as oe,F as C,p as T,z as Re,k as P,i as O,A as xe,B as jt,C as It,j as Kt}from"./runtime-dom.esm-bundler-D9CM_geE.js";/* empty css                        */const Lt=["aria-expanded","onKeydown"],Ot={class:"collapsible-title"},At={class:"collapsible-title-text"},Ft={key:0,class:"collapsible-summary"},Rt={class:"collapsible-actions"},Ht={class:"collapsible-body"},Ce=et({__name:"CollapsibleGroup",props:{title:{},summary:{},open:{type:Boolean}},emits:["toggle"],setup(X,{emit:$e}){const M=$e;function A(){M("toggle")}return(g,re)=>(i(),n("div",{class:k(["collapsible-group",{collapsed:!X.open}])},[t("div",{class:"collapsible-header",role:"button",tabindex:"0","aria-expanded":X.open,onClick:A,onKeydown:[ae(m(A,["prevent"]),["enter"]),ae(m(A,["prevent"]),["space"])]},[t("div",Ot,[t("span",At,a(X.title),1),_e(g.$slots,"title-extra")]),X.open?u("",!0):(i(),n("div",Ft,[_e(g.$slots,"summary",{},()=>[t("span",null,a(X.summary),1)])])),t("div",Rt,[_e(g.$slots,"actions"),re[0]||(re[0]=t("span",{class:"collapsible-toggle"},[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})])],-1))])],40,Lt),se(tt,{name:"collapse"},{default:z(()=>[p(t("div",Ht,[_e(g.$slots,"default")],512),[[zt,X.open]])]),_:3})],2))}}),Nt={class:"ecommerce-image-page"},Gt={class:"wizard-nav"},Xt={class:"wizard-steps"},qt=["aria-current","aria-disabled","onClick"],Jt={class:"wizard-step-indicator"},Yt={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"3"},Zt={key:1},Qt={class:"wizard-step-label"},Wt={key:0,class:"wizard-step-hint"},es={class:"main-container"},ts={class:"sidebar"},ss={class:"sidebar-section"},ls={class:"form-group",style:{"margin-top":"16px"}},ns={class:"form-group"},is={class:"sidebar-section"},os={class:"search-wrapper"},as={key:0,class:"product-list"},rs=["onClick"],ds=["src","alt"],us={class:"product-info"},cs={class:"product-name"},ps={class:"product-meta"},vs={key:1,class:"product-list-empty"},ms={key:2,class:"product-list-loading"},gs={key:3,class:"pagination"},fs=["disabled"],hs={class:"page-info"},ys=["disabled"],bs={key:0,class:"sidebar-section"},ks={class:"section-title"},ws={key:0,class:"image-grid"},_s=["onClick"],xs=["src"],Cs={key:0,class:"image-check"},Ts={key:1,class:"image-primary"},$s={key:1,class:"no-images"},Ss={class:"main-content"},Bs={key:0,class:"workflow-section"},Us={class:"content-panel"},Ps={class:"panel-header"},Ms={key:0,class:"panel-hint"},Vs={key:0,class:"product-fields"},Ds={class:"field-row"},zs={class:"field-checkbox"},Es=["disabled"],js={class:"field-row"},Is={class:"field-checkbox"},Ks=["disabled"],Ls={class:"field-row"},Os={class:"field-checkbox"},As=["disabled"],Fs={class:"field-row"},Rs={class:"field-checkbox"},Hs=["disabled"],Ns={key:1,class:"panel-empty"},Gs={key:1,class:"workflow-section"},Xs={class:"content-panel"},qs={class:"template-modules"},Js={class:"option-chips"},Ys=["onClick"],Zs=["onUpdate:modelValue","data-option-id","onKeydown"],Qs=["onClick"],Ws=["onClick"],el={class:"option-chips"},tl=["onClick"],sl=["onUpdate:modelValue","data-option-id","onKeydown"],ll=["onClick"],nl=["onClick"],il={class:"option-chips"},ol=["onClick"],al=["onUpdate:modelValue","data-option-id","onKeydown"],rl=["onClick"],dl=["onClick"],ul={class:"target-type-selector"},cl={class:"target-type-options"},pl=["value","onChange"],vl={class:"target-type-label"},ml={key:0,class:"target-description-input"},gl={key:0,class:"saved-descriptions-section"},fl={class:"saved-descriptions-list"},hl=["onClick"],yl=["onClick"],bl=["placeholder","disabled"],kl={class:"target-description-actions"},wl=["disabled"],_l=["disabled"],xl={key:1,class:"target-loading"},Cl={class:"template-editor"},Tl={class:"template-editor-section"},$l={key:2,class:"workflow-section"},Sl={class:"content-panel prompt-preview-panel"},Bl={class:"panel-header"},Ul={key:0,class:"panel-hint"},Pl={class:"prompt-structured"},Ml={class:"prompt-row"},Vl={key:1,class:"prompt-empty"},Dl={class:"prompt-row"},zl={key:1,class:"prompt-empty"},El={class:"prompt-row"},jl={key:1,class:"prompt-empty"},Il={class:"prompt-row"},Kl={key:1,class:"prompt-empty"},Ll={class:"prompt-row"},Ol={key:0,class:"prompt-chip target-chip"},Al={key:0,class:"target-chip-name"},Fl={key:1,class:"prompt-empty"},Rl={class:"prompt-full"},Hl={class:"prompt-full-header"},Nl=["disabled"],Gl={class:"prompt-full-body"},Xl={key:0},ql={key:1,class:"prompt-placeholder"},Jl={key:3,class:"workflow-section"},Yl={class:"content-panel"},Zl={class:"panel-header"},Ql={key:0,class:"panel-hint"},Wl={class:"result-area"},en={key:0,class:"result-placeholder"},tn={key:1,class:"loading-state"},sn={key:2,class:"result-container"},ln=["src"],nn={class:"generate-section"},on=["disabled"],an={key:0,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},rn={key:1,class:"spinner-small"},dn={key:0,class:"generate-hint"},un={class:"preview-panel"},cn={class:"preview-card"},pn={class:"preview-card-header"},vn={key:0,class:"preview-card-hint"},mn={class:"preview-card-body"},gn={key:0},fn={key:1,class:"preview-placeholder"},hn={class:"preview-card"},yn={class:"preview-card-body preview-result"},bn={key:0,class:"preview-loading"},kn={key:1},wn=["src"],_n={key:2,class:"preview-placeholder"},xn={class:"toast-container"},Cn={class:"save-dialog-header"},Tn={class:"save-dialog-body"},$n={class:"form-group"},Sn={class:"form-group"},Bn=["value"],Un={class:"save-dialog-footer"},Pn=["disabled"],We="高清产品摄影",Te=10,Mn=et({__name:"ecommerce-image-page",setup(X){const $e=[{id:"target-main",name:"主图",placeholder:"请描述主图的展示重点，如产品摆放方式、突出的卖点...",default_template:"适合电商主图展示的产品图，突出产品整体外观，简洁大方",sort_order:0},{id:"target-detail",name:"详情页",placeholder:"请描述详情页需要展示的产品细节或使用场景...",default_template:"适合详情页的产品展示图，展现产品细节和使用场景",sort_order:1},{id:"target-poster",name:"海报",placeholder:"请描述海报的主题和风格，如促销活动、节日氛围...",default_template:"具有视觉冲击力的营销海报风格，适合活动推广",sort_order:2},{id:"target-white",name:"白底图",placeholder:"请描述白底图的拍摄角度和展示方式...",default_template:"纯白色背景的产品图，适合平台商品展示",sort_order:3},{id:"target-scene",name:"场景图",placeholder:"请描述期望的使用场景和环境氛围...",default_template:"产品在真实使用场景中的展示图，增强代入感",sort_order:4}],M={scene:[{id:"scene-white",label:"白色背景"},{id:"scene-natural-table",label:"自然光桌面"},{id:"scene-outdoor",label:"户外场景"},{id:"scene-solid",label:"纯色背景"},{id:"scene-life",label:"生活场景"}],angle:[{id:"angle-front",label:"正面"},{id:"angle-45",label:"45度侧面"},{id:"angle-top",label:"俯视"},{id:"angle-eye",label:"平视"},{id:"angle-close",label:"特写"}],style:[{id:"style-soft",label:"柔和光影"},{id:"style-contrast",label:"高对比度"},{id:"style-natural",label:"自然光"},{id:"style-studio",label:"专业棚拍"},{id:"style-warm",label:"暖色调"}],target:[{id:"target-main",label:"主图"},{id:"target-detail",label:"详情页"},{id:"target-poster",label:"海报"},{id:"target-white",label:"白底图"},{id:"target-scene",label:"场景图"}]},A=G({apiKey:"",baseUrl:""}),g=G({model:"gemini-3-pro-image-preview",aspectRatio:"",imageSize:"1K"}),re=[{id:1,title:"选择产品"},{id:2,title:"配置模板"},{id:3,title:"预览提示词"},{id:4,title:"生成图片"}],E=d(1),le=d(""),de=d([]),ue=d(!1),ce=d(""),j=d(1),Se=d(0),I=d(null),V=d([]),_=d([]),f=G({name:"",dimensions:"",featuresText:"",characteristicsText:""}),ne=d([]),Be=d(!1),D=d(null),w=d(""),st=d(!1),Z=d(!1),F=d([]),Q=d(!1),q=d(null),ie=d(""),J=U(()=>D.value&&ne.value.find(l=>l.id===D.value)||null),lt=U(()=>{var l;return((l=J.value)==null?void 0:l.placeholder)||"请描述您期望的生成效果..."}),h=G({name:!0,dimensions:!0,features:!0,characteristics:!0}),c=G({scene:M.scene.map(l=>({...l})),angle:M.angle.map(l=>({...l})),style:M.style.map(l=>({...l})),target:M.target.map(l=>({...l}))}),b=G({scene:[],angle:[],style:[],target:[]}),R=G({scene:!0,angle:!1,style:!1,target:!1}),pe=d(!1),y=G({category:"",id:""}),H=d(We),B=d(!1),K=d(""),W=d(""),ve=d([]),Ue=U(()=>Math.ceil(Se.value/Te));function Pe(l){return globalThis.crypto&&"randomUUID"in globalThis.crypto?`${l}-${globalThis.crypto.randomUUID()}`:`${l}-${Date.now()}-${Math.random().toString(16).slice(2)}`}function He(l){return l.split(`
`).map(e=>e.trim()).filter(Boolean)}function Ne(l){return l.filter(Boolean).join("、")}function me(l){const e=new Set(b[l]);return c[l].filter(s=>e.has(s.id)).map(s=>s.label.trim()).filter(Boolean)}function L(l,e){return y.category===l&&y.id===e}const Y=U(()=>({scene:me("scene"),angle:me("angle"),style:me("style"),target:me("target")})),nt=U(()=>b.scene.length>0||b.angle.length>0||b.style.length>0||!!D.value);function Me(l){const e=Y.value[l];return e.length?e.length<=2?e.join("、"):`${e[0]}、${e[1]} 等${e.length}项`:"未选择"}function ge(l){R[l]=!R[l],pe.value=!0}function Ve(l=!1){if(pe.value&&!l)return;const e=["scene","angle","style","target"];let s=!1;e.forEach(o=>{!s&&b[o].length===0?(R[o]=!0,s=!0):R[o]=!1}),pe.value=!1}const De=U(()=>{const l=[],e=f.name.trim(),s=f.dimensions.trim();return h.name&&e&&l.push(e),h.dimensions&&s&&l.push(s),h.features&&l.push(...He(f.featuresText)),h.characteristics&&l.push(...He(f.characteristicsText)),l}),$=U(()=>({product:De.value,scene:Y.value.scene,angle:Y.value.angle,style:Y.value.style,target:w.value?[w.value]:[]}));function ze(l,e){return e.length?`${l}：${Ne(e)}`:""}function Ge(l){return l.replace(/[，、]{2,}/g,"，").replace(/^[，、\s]+/,"").replace(/[，、\s]+$/,"").replace(/\s*[，、]\s*/g,"，").trim()}function Ee(l){if(!l)return"";const e=l.trim();if(!e.includes("{{"))return e;const s=e.replace(/\{\{(\w+)(?:\|([^}]*))?\}\}/g,(o,r,v)=>v??"");return Ge(s)}const x=U(()=>{if(!I.value)return"";const l=[];De.value.length&&l.push(Ne(De.value));const e=ze("场景",Y.value.scene);e&&l.push(e);const s=ze("拍摄角度",Y.value.angle);s&&l.push(s);const o=ze("风格",Y.value.style);o&&l.push(o);const r=w.value.trim();r&&l.push(r);const v=Ee(H.value);return v&&l.push(v),Ge(l.join("，"))}),Xe=U(()=>I.value&&_.value.length>0&&x.value.length>0),fe=U(()=>B.value?"正在生成图片...":I.value?_.value.length===0?"请选择至少一张参考图片":x.value?"":"请完善模板选项或产品信息":"请先在左侧选择产品");function N(l){return l===1?!!I.value&&_.value.length>0:l===2?nt.value:l===3?x.value.length>0:l===4?K.value.length>0:!1}const qe=U(()=>N(1)?N(2)?N(3)?4:3:2:1);function je(l){return l<=qe.value}function it(){return N(1)?N(2)?N(3)?"请先完成前置步骤":"请先完成步骤3：完善提示词预览":"请先完成步骤2：至少选择一个模板选项":"请先完成步骤1：选择产品并勾选参考图"}function ot(l){if(je(l)){E.value=l,le.value="";return}le.value=it()}function Ie(){const l=document.cookie.match(/csrf_token=([^;]+)/);return l?l[1]:""}function at(l){return String(l||"").trim().replace(/^bearer\s+/i,"").trim()}function rt(l){return String(l||"").trim()||null}function Je(l){if(!l||typeof l!="object")return null;if(Array.isArray(l.data)&&l.data[0]){const e=l.data[0];if(e!=null&&e.url)return e.url;if(e!=null&&e.b64_json)return`data:image/png;base64,${e.b64_json}`}return l.url?l.url:l.b64_json?`data:image/png;base64,${l.b64_json}`:l.image_url?l.image_url:null}async function he(){ue.value=!0;try{const l=new URLSearchParams({offset:String((j.value-1)*Te),limit:String(Te)});ce.value&&l.set("name",ce.value);const e=await fetch(`/api/v1/products?${l}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch products");const s=await e.json();de.value=s.products||[],Se.value=s.total||0}catch{S("加载产品列表失败","error")}finally{ue.value=!1}}function dt(){j.value=1,he()}async function ut(){Be.value=!0;try{const l=await fetch("/api/v1/target-types",{credentials:"include"});if(!l.ok)throw new Error("Failed to fetch target types");const e=await l.json();ne.value=e.target_types||[]}catch{console.warn("Failed to load target types from API, using defaults"),ne.value=[...$e]}finally{Be.value=!1}}async function ct(l){if(!l){F.value=[];return}try{const e=await fetch(`/api/v1/target-descriptions?target_type_id=${encodeURIComponent(l)}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to fetch saved descriptions");const s=await e.json();F.value=s.descriptions||[]}catch(e){console.warn("Failed to load saved descriptions:",e),F.value=[]}}function pt(l){w.value=l.description,q.value=l.id}async function vt(){const l=D.value,e=ie.value.trim(),s=w.value.trim();if(!l||!e||!s){S("请填写名称和描述","error");return}Z.value=!0;try{const o={target_type_id:l,name:e,description:s},r=await fetch("/api/v1/target-descriptions",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-CSRF-Token":Ie()},body:JSON.stringify(o)});if(!r.ok){const te=await r.json().catch(()=>({}));throw new Error(te.detail||`HTTP ${r.status}`)}const v=await r.json();F.value.unshift(v),q.value=v.id,Q.value=!1,ie.value="",S("描述已保存","success")}catch(o){S(o.message||"保存描述失败","error")}finally{Z.value=!1}}async function mt(l){if(confirm("确定要删除这个保存的描述吗？"))try{const e=await fetch(`/api/v1/target-descriptions/${l}`,{method:"DELETE",credentials:"include",headers:{"X-CSRF-Token":Ie()}});if(!e.ok){const s=await e.json().catch(()=>({}));throw new Error(s.detail||`HTTP ${e.status}`)}F.value=F.value.filter(s=>s.id!==l),q.value===l&&(q.value=null),S("描述已删除","success")}catch(e){S(e.message||"删除描述失败","error")}}function gt(){const l=J.value;l&&(w.value=l.default_template||"",q.value=null)}async function ft(l){const e=D.value;if(D.value=l,e!==l){q.value=null;const s=ne.value.find(o=>o.id===l);w.value=(s==null?void 0:s.default_template)||"",await ct(l)}}function ht(){j.value>1&&(j.value--,he())}function yt(){j.value<Ue.value&&(j.value++,he())}function bt(l){if(l.images&&l.images.length>0){const e=l.images.find(s=>s.is_primary);return e?e.image_url:l.images[0].image_url}return l.original_image_url||"/static/placeholder.png"}async function kt(l){I.value=l;try{const e=await fetch(`/api/v1/products/${l.id}`,{credentials:"include"});if(!e.ok)throw new Error("Failed to load product details");const s=await e.json();f.name=s.name||"",f.dimensions=s.dimensions||"",f.featuresText=(s.features||[]).join(`
`),f.characteristicsText=(s.characteristics||[]).join(`
`),V.value=s.images||[],V.value.length===0&&s.original_image_url&&(V.value=[{id:s.id,image_url:s.original_image_url,is_primary:!0}]);const o=V.value.find(r=>r.is_primary);o?_.value=[o.id]:V.value.length>0?_.value=[V.value[0].id]:_.value=[]}catch{S("加载产品详情失败","error")}}function wt(l){const e=_.value.indexOf(l);e===-1?_.value.push(l):_.value.splice(e,1)}function _t(l,e){return c[l].find(s=>s.id===e)??null}function xt(l){It(()=>{const e=document.querySelector(`.option-edit-input[data-option-id="${l}"]`);e&&(e.focus(),e.select())})}function Ke(l,e){const s=b[l],o=s.indexOf(e);o===-1?s.push(e):s.splice(o,1)}function Le(l){const e={id:Pe(l),label:"新选项"};c[l].push(e),Oe(),be(l,e.id)}function ye(l,e){const s=c[l].findIndex(r=>r.id===e);if(s===-1)return;c[l].splice(s,1);const o=b[l].indexOf(e);o!==-1&&b[l].splice(o,1),y.category===l&&y.id===e&&(y.category="",y.id=""),Oe()}function be(l,e){y.category=l,y.id=e,xt(e)}function ee(){if(!y.category||!y.id)return;const l=y.category,e=y.id;y.category="",y.id="";const s=_t(l,e);if(!s)return;const o=s.label.trim();if(!o){ye(l,e);return}s.label=o,Oe()}function Ct(){c.scene=M.scene.map(l=>({...l})),c.angle=M.angle.map(l=>({...l})),c.style=M.style.map(l=>({...l})),c.target=M.target.map(l=>({...l})),b.scene=[],b.angle=[],b.style=[],b.target=[],y.category="",y.id="",pe.value=!1,Ve(!0),localStorage.removeItem("ecommerce-image-templates"),S("模板已重置为默认值","success")}function Oe(){const l={version:2,templates:{scene:c.scene.map(e=>({id:e.id,label:e.label})),angle:c.angle.map(e=>({id:e.id,label:e.label})),style:c.style.map(e=>({id:e.id,label:e.label})),target:c.target.map(e=>({id:e.id,label:e.label}))}};localStorage.setItem("ecommerce-image-templates",JSON.stringify(l))}function ke(l,e){if(!Array.isArray(l))return null;const s=[];for(const o of l){if(typeof o=="string"){const r=o.trim();r&&s.push({id:Pe(e),label:r});continue}if(o&&typeof o=="object"){const r=typeof o.label=="string"?o.label.trim():"";if(!r)continue;const v=typeof o.id=="string"?String(o.id):Pe(e);s.push({id:v,label:r})}}return s.length?s:null}function Tt(){const l=localStorage.getItem("ecommerce-image-templates");if(l)try{const e=JSON.parse(l),s=(e==null?void 0:e.templates)||e,o=ke(s==null?void 0:s.scene,"scene"),r=ke(s==null?void 0:s.angle,"angle"),v=ke(s==null?void 0:s.style,"style"),te=ke(s==null?void 0:s.target,"target");o&&(c.scene=o),r&&(c.angle=r),v&&(c.style=v),te&&(c.target=te)}catch{}}function $t(){const l=Ee(H.value);l!==H.value&&(H.value=l),localStorage.setItem("ecommerce-image-prompt-template",l)}function St(){const l=localStorage.getItem("ecommerce-image-prompt-template");l&&(H.value=Ee(l))}function Bt(){H.value=We,localStorage.removeItem("ecommerce-image-prompt-template"),S("提示词模板已重置为默认值","success")}function Ut(){A.apiKey=localStorage.getItem("global_api_key")||localStorage.getItem("video_api_key")||"",A.baseUrl=localStorage.getItem("global_base_url")||localStorage.getItem("video_base_url")||""}async function Pt(){if(x.value)try{await navigator.clipboard.writeText(x.value),S("提示词已复制到剪贴板","success")}catch{S("复制失败","error")}}async function Ye(){if(!(!Xe.value||B.value)){B.value=!0,W.value="";try{const l=new FormData;l.append("prompt",x.value),l.append("model",g.model),l.append("response_format","url"),g.aspectRatio&&l.append("aspect_ratio",g.aspectRatio),g.imageSize&&l.append("image_size",g.imageSize);for(const we of _.value){const Ae=V.value.find(Fe=>Fe.id===we);if(Ae)try{const Dt=await(await fetch(Ae.image_url)).blob();l.append("image",Dt,`ref-${we}.jpg`)}catch{console.warn("Failed to fetch reference image:",Ae.image_url)}}const e={"X-CSRF-Token":Ie()},s=at(A.apiKey);s&&(e["X-API-Key"]=s);const o=rt(A.baseUrl);o&&(e["X-Base-Url"]=o);const r=await fetch("/api/v1/images/edits",{method:"POST",credentials:"include",headers:e,body:l});if(!r.ok){const we=await r.json().catch(()=>({}));throw new Error(we.detail||`HTTP ${r.status}`)}const v=await r.json(),te=v&&typeof v=="object"&&v.response?v.response:v,Ze=Je(te)||Je(v);if(Ze)K.value=Ze;else throw new Error("Invalid response format");S("图片生成成功","success")}catch(l){W.value=l.message||"生成失败，请重试"}finally{B.value=!1}}}function Mt(){if(!K.value)return;const l=document.createElement("a");l.href=K.value,l.download=`ecommerce-${Date.now()}.png`,document.body.appendChild(l),l.click(),document.body.removeChild(l)}let Vt=0;function S(l,e="info"){const s=Vt++;ve.value.push({id:s,message:l,type:e}),setTimeout(()=>{const o=ve.value.findIndex(r=>r.id===s);o!==-1&&ve.value.splice(o,1)},3e3)}return Qe(E,l=>{le.value="",l===2&&Ve()}),Qe(qe,l=>{E.value>l&&(E.value=l)}),Et(()=>{Tt(),St(),Ut(),he(),ut(),Ve(!0)}),(l,e)=>(i(),n("div",Nt,[e[95]||(e[95]=oe('<header class="header"><div class="logo"><div class="logo-icon"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg></div><span>电商图生成</span></div><div class="header-actions"><a href="/" class="btn btn-secondary" style="text-decoration:none;display:flex;align-items:center;gap:8px;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回主页面 </a></div></header>',1)),t("nav",Gt,[t("div",Xt,[(i(),n(C,null,T(re,s=>t("button",{key:s.id,class:k(["wizard-step",{active:E.value===s.id,completed:N(s.id),disabled:!je(s.id)}]),"aria-current":E.value===s.id?"step":void 0,"aria-disabled":!je(s.id),onClick:o=>ot(s.id)},[t("span",Jt,[N(s.id)?(i(),n("svg",Yt,[...e[31]||(e[31]=[t("polyline",{points:"20 6 9 17 4 12"},null,-1)])])):(i(),n("span",Zt,a(s.id),1))]),t("span",Qt,a(s.title),1)],10,qt)),64))]),le.value?(i(),n("div",Wt,a(le.value),1)):u("",!0)]),t("div",es,[t("aside",ts,[t("section",ss,[e[37]||(e[37]=oe('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg> Model Selection </div>',1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[0]||(e[0]=s=>g.model=s)},[...e[32]||(e[32]=[t("option",{value:"gemini-3-pro-image-preview"},"gemini-3-pro-image-preview (推荐)",-1),t("option",{value:"gemini-2.5-flash-image"},"gemini-2.5-flash-image (快速)",-1)])],512),[[Re,g.model]]),t("div",ls,[e[34]||(e[34]=t("label",{class:"form-label"},"Aspect Ratio",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[1]||(e[1]=s=>g.aspectRatio=s)},[...e[33]||(e[33]=[oe('<option value="">Auto</option><option value="1:1">1:1 (Square)</option><option value="16:9">16:9 (Landscape)</option><option value="9:16">9:16 (Portrait)</option><option value="4:3">4:3</option><option value="3:4">3:4</option><option value="3:2">3:2</option><option value="2:3">2:3</option><option value="4:5">4:5</option><option value="5:4">5:4</option>',10)])],512),[[Re,g.aspectRatio]])]),t("div",ns,[e[36]||(e[36]=t("label",{class:"form-label"},"Image Size",-1)),p(t("select",{class:"form-select","onUpdate:modelValue":e[2]||(e[2]=s=>g.imageSize=s)},[...e[35]||(e[35]=[t("option",{value:""},"Default",-1),t("option",{value:"1K"},"1K",-1),t("option",{value:"2K"},"2K",-1),t("option",{value:"4K"},"4K",-1)])],512),[[Re,g.imageSize]])])]),t("section",is,[e[43]||(e[43]=oe('<div class="section-title"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 7H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z"></path><path d="M9 2v5"></path><path d="M15 2v5"></path><path d="M2 9h20"></path></svg> 选择产品 </div>',1)),t("div",os,[e[38]||(e[38]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"11",cy:"11",r:"8"}),t("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})],-1)),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[3]||(e[3]=s=>ce.value=s),placeholder:"搜索产品...",onInput:dt},null,544),[[P,ce.value]])]),!ue.value&&de.value.length>0?(i(),n("div",as,[(i(!0),n(C,null,T(de.value,s=>{var o;return i(),n("div",{key:s.id,class:k(["product-item",{selected:((o=I.value)==null?void 0:o.id)===s.id}]),onClick:r=>kt(s)},[t("img",{src:bt(s),alt:s.name,class:"product-thumb"},null,8,ds),t("div",us,[t("div",cs,a(s.name||"未命名产品"),1),t("div",ps,a(s.dimensions||""),1)])],10,rs)}),128))])):!ue.value&&de.value.length===0?(i(),n("div",vs,[...e[39]||(e[39]=[t("p",null,"暂无产品",-1),t("a",{href:"/products",class:"btn btn-secondary btn-sm"},"前往产品库",-1)])])):(i(),n("div",ms,[...e[40]||(e[40]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载中...",-1)])])),Se.value>Te?(i(),n("div",gs,[t("button",{class:"btn btn-ghost btn-sm",disabled:j.value<=1,onClick:ht},[...e[41]||(e[41]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"15 18 9 12 15 6"})],-1)])],8,fs),t("span",hs,a(j.value)+" / "+a(Ue.value),1),t("button",{class:"btn btn-ghost btn-sm",disabled:j.value>=Ue.value,onClick:yt},[...e[42]||(e[42]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"9 18 15 12 9 6"})],-1)])],8,ys)])):u("",!0)]),I.value?(i(),n("section",bs,[t("div",ks,[e[44]||(e[44]=t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1)),O(" 参考图片 ("+a(_.value.length)+"/"+a(V.value.length)+") ",1)]),V.value.length>0?(i(),n("div",ws,[(i(!0),n(C,null,T(V.value,s=>(i(),n("div",{key:s.id,class:k(["image-item",{selected:_.value.includes(s.id)}]),onClick:o=>wt(s.id)},[t("img",{src:s.image_url,alt:"Product image"},null,8,xs),_.value.includes(s.id)?(i(),n("div",Cs,[...e[45]||(e[45]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"white","stroke-width":"3"},[t("polyline",{points:"20 6 9 17 4 12"})],-1)])])):u("",!0),s.is_primary?(i(),n("div",Ts,"主图")):u("",!0)],10,_s))),128))])):(i(),n("div",$s,[...e[46]||(e[46]=[t("p",null,"该产品暂无图片",-1)])]))])):u("",!0)]),t("main",Ss,[se(tt,{name:"step-fade",mode:"out-in"},{default:z(()=>[E.value===1?(i(),n("section",Bs,[t("div",Us,[t("div",Ps,[e[47]||(e[47]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"1"),t("div",null,[t("h3",null,"产品选择"),t("p",{class:"panel-subtitle"},"选择产品与参考图，并完善提示词字段")])],-1)),I.value?u("",!0):(i(),n("span",Ms,"请先从左侧选择产品"))]),I.value?(i(),n("div",Vs,[t("div",Ds,[t("label",zs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[4]||(e[4]=s=>h.name=s)},null,512),[[xe,h.name]]),e[48]||(e[48]=t("span",null,"产品名称",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[5]||(e[5]=s=>f.name=s),disabled:!h.name,placeholder:"例如：保温杯"},null,8,Es),[[P,f.name]])]),t("div",js,[t("label",Is,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>h.dimensions=s)},null,512),[[xe,h.dimensions]]),e[49]||(e[49]=t("span",null,"尺寸规格",-1))]),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[7]||(e[7]=s=>f.dimensions=s),disabled:!h.dimensions,placeholder:"例如：500ml"},null,8,Ks),[[P,f.dimensions]])]),t("div",Ls,[t("label",Os,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[8]||(e[8]=s=>h.features=s)},null,512),[[xe,h.features]]),e[50]||(e[50]=t("span",null,"功能特征",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[9]||(e[9]=s=>f.featuresText=s),disabled:!h.features,rows:"2",placeholder:"每行一个特征"},null,8,As),[[P,f.featuresText]])]),t("div",Fs,[t("label",Rs,[p(t("input",{type:"checkbox","onUpdate:modelValue":e[10]||(e[10]=s=>h.characteristics=s)},null,512),[[xe,h.characteristics]]),e[51]||(e[51]=t("span",null,"产品特点",-1))]),p(t("textarea",{class:"form-input","onUpdate:modelValue":e[11]||(e[11]=s=>f.characteristicsText=s),disabled:!h.characteristics,rows:"2",placeholder:"每行一个特点"},null,8,Hs),[[P,f.characteristicsText]])])])):(i(),n("div",Ns," 选择产品后将自动填充名称、规格与特征信息。 "))])])):E.value===2?(i(),n("section",Gs,[t("div",Xs,[t("div",{class:"panel-header"},[e[53]||(e[53]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"2"),t("div",null,[t("h3",null,"模板配置"),t("p",{class:"panel-subtitle"},"点击标签可多选，支持就地编辑")])],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:Ct},[...e[52]||(e[52]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),O(" 重置模板 ",-1)])])]),t("div",qs,[se(Ce,{title:"场景选择",summary:Me("scene"),open:R.scene,onToggle:e[13]||(e[13]=s=>ge("scene"))},{actions:z(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[12]||(e[12]=m(s=>Le("scene"),["stop"]))},[...e[54]||(e[54]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:z(()=>[t("div",Js,[(i(!0),n(C,null,T(c.scene,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:b.scene.includes(s.id),editing:L("scene",s.id)}])},[L("scene",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:ee,onKeydown:ae(m(ee,["prevent"]),["enter"])},null,40,Zs)),[[P,s.label]]):(i(),n("span",{key:0,onClick:o=>Ke("scene",s.id)},a(s.label),9,Ys)),L("scene",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:m(o=>be("scene",s.id),["stop"])},[...e[55]||(e[55]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,Qs)),t("button",{class:"chip-delete",onClick:m(o=>ye("scene",s.id),["stop"])},[...e[56]||(e[56]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,Ws)],2))),128))])]),_:1},8,["summary","open"]),se(Ce,{title:"拍摄角度",summary:Me("angle"),open:R.angle,onToggle:e[15]||(e[15]=s=>ge("angle"))},{actions:z(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[14]||(e[14]=m(s=>Le("angle"),["stop"]))},[...e[57]||(e[57]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:z(()=>[t("div",el,[(i(!0),n(C,null,T(c.angle,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:b.angle.includes(s.id),editing:L("angle",s.id)}])},[L("angle",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:ee,onKeydown:ae(m(ee,["prevent"]),["enter"])},null,40,sl)),[[P,s.label]]):(i(),n("span",{key:0,onClick:o=>Ke("angle",s.id)},a(s.label),9,tl)),L("angle",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:m(o=>be("angle",s.id),["stop"])},[...e[58]||(e[58]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,ll)),t("button",{class:"chip-delete",onClick:m(o=>ye("angle",s.id),["stop"])},[...e[59]||(e[59]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,nl)],2))),128))])]),_:1},8,["summary","open"]),se(Ce,{title:"风格 / 光影",summary:Me("style"),open:R.style,onToggle:e[17]||(e[17]=s=>ge("style"))},{"title-extra":z(()=>[...e[60]||(e[60]=[t("span",{class:"optional-tag"},"(可选)",-1)])]),actions:z(()=>[t("button",{class:"btn btn-ghost btn-icon-sm",onClick:e[16]||(e[16]=m(s=>Le("style"),["stop"]))},[...e[61]||(e[61]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])])]),default:z(()=>[t("div",il,[(i(!0),n(C,null,T(c.style,s=>(i(),n("div",{key:s.id,class:k(["option-chip",{selected:b.style.includes(s.id),editing:L("style",s.id)}])},[L("style",s.id)?p((i(),n("input",{key:1,type:"text",class:"option-edit-input","onUpdate:modelValue":o=>s.label=o,"data-option-id":s.id,onBlur:ee,onKeydown:ae(m(ee,["prevent"]),["enter"])},null,40,al)),[[P,s.label]]):(i(),n("span",{key:0,onClick:o=>Ke("style",s.id)},a(s.label),9,ol)),L("style",s.id)?u("",!0):(i(),n("button",{key:2,class:"chip-edit",onClick:m(o=>be("style",s.id),["stop"])},[...e[62]||(e[62]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)])],8,rl)),t("button",{class:"chip-delete",onClick:m(o=>ye("style",s.id),["stop"])},[...e[63]||(e[63]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,dl)],2))),128))])]),_:1},8,["summary","open"]),se(Ce,{title:"生成目标",summary:J.value?J.value.name:"未选择",open:R.target,onToggle:e[21]||(e[21]=s=>ge("target"))},{default:z(()=>[t("div",ul,[t("div",cl,[(i(!0),n(C,null,T(ne.value,s=>(i(),n("label",{key:s.id,class:k(["target-type-radio",{selected:D.value===s.id}])},[p(t("input",{type:"radio",name:"target-type",value:s.id,"onUpdate:modelValue":e[18]||(e[18]=o=>D.value=o),onChange:o=>ft(s.id)},null,40,pl),[[jt,D.value]]),t("span",vl,a(s.name),1)],2))),128))]),D.value?(i(),n("div",ml,[F.value.length>0?(i(),n("div",gl,[e[65]||(e[65]=t("label",{class:"target-description-label"},"已保存的描述",-1)),t("div",fl,[(i(!0),n(C,null,T(F.value,s=>(i(),n("div",{key:s.id,class:k(["saved-description-item",{active:q.value===s.id}])},[t("button",{class:"saved-description-btn",onClick:o=>pt(s)},a(s.name),9,hl),t("button",{class:"saved-description-delete",onClick:m(o=>mt(s.id),["stop"]),title:"删除"},[...e[64]||(e[64]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])],8,yl)],2))),128))])])):u("",!0),e[67]||(e[67]=t("label",{class:"target-description-label"},"目标描述",-1)),p(t("textarea",{class:"form-input target-textarea","onUpdate:modelValue":e[19]||(e[19]=s=>w.value=s),placeholder:lt.value,disabled:st.value||Z.value,rows:"3"},null,8,bl),[[P,w.value]]),t("div",kl,[t("button",{class:"btn btn-secondary btn-sm",type:"button",onClick:e[20]||(e[20]=s=>Q.value=!0),disabled:!w.value.trim()||Z.value},[...e[66]||(e[66]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),t("polyline",{points:"17 21 17 13 7 13 7 21"}),t("polyline",{points:"7 3 7 8 15 8"})],-1),O(" 保存描述 ",-1)])],8,wl),t("button",{class:"btn btn-ghost btn-sm",type:"button",onClick:gt,disabled:!J.value}," 重置为默认 ",8,_l)]),e[68]||(e[68]=t("p",{class:"target-description-hint"}," 描述将作为生成提示词的一部分，请详细描述您期望的效果 ",-1))])):u("",!0),Be.value?(i(),n("div",xl,[...e[69]||(e[69]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"加载目标类型...",-1)])])):u("",!0)])]),_:1},8,["summary","open"])]),t("div",Cl,[t("div",{class:"template-editor-header"},[e[71]||(e[71]=t("div",null,[t("h4",null,"提示词模板"),t("p",{class:"template-editor-subtitle"},"系统会自动拼接已选信息，可补充额外描述")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:Bt},[...e[70]||(e[70]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),O(" 重置模板 ",-1)])])]),t("div",Tl,[e[72]||(e[72]=t("div",{class:"template-editor-hint"}," 已选场景/角度等会自动生成，例如：场景：客厅，拍摄角度：正面。 ",-1)),p(t("textarea",{class:"form-input template-textarea","onUpdate:modelValue":e[22]||(e[22]=s=>H.value=s),rows:"4",placeholder:"补充提示词，如：高清产品摄影",onInput:$t},null,544),[[P,H.value]])])])])])):E.value===3?(i(),n("section",$l,[t("div",Sl,[t("div",Bl,[e[73]||(e[73]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"3"),t("div",null,[t("h3",null,"提示词预览"),t("p",{class:"panel-subtitle"},"分段预览并高亮关键信息")])],-1)),x.value?u("",!0):(i(),n("span",Ul,"完善产品信息与模板后自动生成"))]),t("div",Pl,[t("div",Ml,[e[74]||(e[74]=t("span",{class:"prompt-label"},"产品信息",-1)),t("div",{class:k(["prompt-value",{empty:$.value.product.length===0}])},[$.value.product.length?(i(!0),n(C,{key:0},T($.value.product,(s,o)=>(i(),n("span",{key:`product-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",Vl,"未选择或未填写"))],2)]),t("div",Dl,[e[75]||(e[75]=t("span",{class:"prompt-label"},"场景",-1)),t("div",{class:k(["prompt-value",{empty:$.value.scene.length===0}])},[$.value.scene.length?(i(!0),n(C,{key:0},T($.value.scene,(s,o)=>(i(),n("span",{key:`scene-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",zl,"未选择场景"))],2)]),t("div",El,[e[76]||(e[76]=t("span",{class:"prompt-label"},"角度",-1)),t("div",{class:k(["prompt-value",{empty:$.value.angle.length===0}])},[$.value.angle.length?(i(!0),n(C,{key:0},T($.value.angle,(s,o)=>(i(),n("span",{key:`angle-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",jl,"未选择角度"))],2)]),t("div",Il,[e[77]||(e[77]=t("span",{class:"prompt-label"},"风格 / 光影",-1)),t("div",{class:k(["prompt-value",{empty:$.value.style.length===0}])},[$.value.style.length?(i(!0),n(C,{key:0},T($.value.style,(s,o)=>(i(),n("span",{key:`style-${o}`,class:"prompt-chip"},a(s),1))),128)):(i(),n("span",Kl,"未选择风格"))],2)]),t("div",Ll,[e[78]||(e[78]=t("span",{class:"prompt-label"},"生成目标",-1)),t("div",{class:k(["prompt-value",{empty:!w.value}])},[w.value?(i(),n("span",Ol,[J.value?(i(),n("span",Al,a(J.value.name)+"：",1)):u("",!0),O(" "+a(w.value),1)])):(i(),n("span",Fl,"未选择目标"))],2)])]),t("div",Rl,[t("div",Hl,[e[80]||(e[80]=t("div",null,[t("h4",null,"完整 Prompt"),t("p",{class:"prompt-full-hint"},"可直接复制用于生成")],-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:Pt,disabled:!x.value},[...e[79]||(e[79]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})],-1),O(" 复制 ",-1)])],8,Nl)]),t("div",Gl,[x.value?(i(),n("p",Xl,a(x.value),1)):(i(),n("p",ql,"选择产品和模板选项后，提示词将在这里生成。"))])])])])):(i(),n("section",Jl,[t("div",Yl,[t("div",Zl,[e[81]||(e[81]=t("div",{class:"panel-title"},[t("span",{class:"step-indicator"},"4"),t("div",null,[t("h3",null,"生成与结果"),t("p",{class:"panel-subtitle"},"确认参考图与提示词后开始生成")])],-1)),fe.value?(i(),n("span",Ql,a(fe.value),1)):u("",!0)]),t("div",Wl,[!B.value&&!K.value?(i(),n("div",en,[...e[82]||(e[82]=[t("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[t("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),t("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),t("polyline",{points:"21 15 16 10 5 21"})],-1),t("h3",null,"准备生成",-1),t("p",null,"选择产品、参考图片与模板选项，然后点击生成。",-1)])])):u("",!0),B.value?(i(),n("div",tn,[...e[83]||(e[83]=[t("div",{class:"spinner"},null,-1),t("p",null,"正在生成图片...",-1)])])):u("",!0),K.value&&!B.value?(i(),n("div",sn,[t("img",{src:K.value,alt:"Generated image",class:"result-image"},null,8,ln),t("div",{class:"result-actions"},[t("button",{class:"btn btn-secondary",onClick:Mt},[...e[84]||(e[84]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),t("polyline",{points:"7 10 12 15 17 10"}),t("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),O(" 下载 ",-1)])]),t("button",{class:"btn btn-primary",onClick:Ye},[...e[85]||(e[85]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"1 4 1 10 7 10"}),t("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})],-1),O(" 重新生成 ",-1)])])])])):u("",!0)]),t("div",nn,[t("button",{class:"generate-btn",disabled:!Xe.value||B.value,onClick:Ye},[B.value?(i(),n("div",rn)):(i(),n("svg",an,[...e[86]||(e[86]=[t("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"},null,-1)])])),O(" "+a(B.value?"生成中...":"生成电商图"),1)],8,on),fe.value?(i(),n("div",dn,a(fe.value),1)):u("",!0)])])]))]),_:1})]),t("aside",un,[t("div",cn,[t("div",pn,[e[87]||(e[87]=t("h4",null,"提示词预览",-1)),x.value?u("",!0):(i(),n("span",vn,"完成前两步后显示"))]),t("div",mn,[x.value?(i(),n("p",gn,a(x.value),1)):(i(),n("p",fn,"选择产品与模板选项后生成提示词。"))])]),t("div",hn,[e[89]||(e[89]=t("div",{class:"preview-card-header"},[t("h4",null,"生成结果")],-1)),t("div",yn,[B.value?(i(),n("div",bn,[...e[88]||(e[88]=[t("div",{class:"spinner-small"},null,-1),t("span",null,"正在生成...",-1)])])):K.value?(i(),n("div",kn,[t("img",{src:K.value,alt:"Generated preview",class:"preview-image"},null,8,wn)])):(i(),n("p",_n,"生成完成后显示结果。"))])])])]),t("div",xn,[(i(!0),n(C,null,T(ve.value,s=>(i(),n("div",{key:s.id,class:k(["toast",s.type])},a(s.message),3))),128))]),W.value?(i(),n("div",{key:0,class:"error-overlay",onClick:e[25]||(e[25]=s=>W.value="")},[t("div",{class:"error-modal",onClick:e[24]||(e[24]=m(()=>{},["stop"]))},[e[90]||(e[90]=oe('<div class="error-header"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg><h3>生成失败</h3></div>',1)),t("p",null,a(W.value),1),t("button",{class:"btn btn-primary",onClick:e[23]||(e[23]=s=>W.value="")},"确定")])])):u("",!0),Q.value?(i(),n("div",{key:1,class:"save-dialog-overlay",onClick:e[30]||(e[30]=s=>Q.value=!1)},[t("div",{class:"save-dialog-modal",onClick:e[29]||(e[29]=m(()=>{},["stop"]))},[t("div",Cn,[e[92]||(e[92]=t("h3",null,"保存目标描述",-1)),t("button",{class:"save-dialog-close",onClick:e[26]||(e[26]=s=>Q.value=!1)},[...e[91]||(e[91]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),t("line",{x1:"6",y1:"6",x2:"18",y2:"18"})],-1)])])]),t("div",Tn,[t("div",$n,[e[93]||(e[93]=t("label",{class:"form-label"},"描述名称",-1)),p(t("input",{type:"text",class:"form-input","onUpdate:modelValue":e[27]||(e[27]=s=>ie.value=s),placeholder:"例如：清新自然风格",maxlength:"100"},null,512),[[P,ie.value]])]),t("div",Sn,[e[94]||(e[94]=t("label",{class:"form-label"},"描述内容",-1)),t("textarea",{class:"form-input",value:w.value,readonly:"",rows:"3"},null,8,Bn)])]),t("div",Un,[t("button",{class:"btn btn-secondary",onClick:e[28]||(e[28]=s=>Q.value=!1)},"取消"),t("button",{class:"btn btn-primary",onClick:vt,disabled:!ie.value.trim()||Z.value},a(Z.value?"保存中...":"保存"),9,Pn)])])])):u("",!0)]))}});Kt(Mn).mount("#app");
