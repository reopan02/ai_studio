import{d as L,r as h,c as g,o as z,a as s,b as i,e,g as f,i as d,t as l,F as _,p as m,s as u,n as w,f as k,j,k as N}from"./supabase-Bkt_6nLH.js";/* empty css                   */const S={class:"storage-page"},A={class:"container"},$={class:"section"},q={class:"section-header"},D={style:{display:"flex","align-items":"center",gap:"12px"}},I={class:"section-count"},F={class:"storage-grid"},T={key:0,class:"empty-state"},E={key:1,class:"empty-state",style:{"grid-column":"1/-1"}},G={width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#cbd5e1","stroke-width":"1.5",style:{"margin-bottom":"16px"}},J={class:"video-thumb"},K=["src"],O={key:1,style:{color:"white",opacity:"0.9"}},P={class:"video-info"},Q={class:"video-title"},R={class:"video-meta"},U={style:{color:"#94a3b8"}},W=["title"],X={class:"video-actions"},Y=["href"],Z=["onClick"],ee={class:"section"},te={class:"section-header"},oe={style:{display:"flex","align-items":"center",gap:"12px"}},se={class:"section-count"},ie={class:"storage-grid"},ne={key:0,class:"empty-state"},le={key:1,class:"empty-state",style:{"grid-column":"1/-1"}},ae={width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"#cbd5e1","stroke-width":"1.5",style:{"margin-bottom":"16px"}},re={class:"video-thumb"},de=["src"],ce={key:1,style:{color:"white",opacity:"0.9"}},ve={class:"video-info"},he={class:"video-title"},ue={class:"video-meta"},pe={style:{color:"#94a3b8"}},ye=["title"],ge={class:"video-actions"},fe=["href"],_e=["onClick"],me=L({__name:"storage-page",setup(ke){const a=h([]),r=h([]),c=h(!0),v=h(!0),x=g(()=>c.value?"加载中...":a.value.length===0?"暂无记录":`${a.value.length} 个视频`),b=g(()=>v.value?"加载中...":r.value.length===0?"暂无记录":`${r.value.length} 个图像`);function p(n){try{return new Date(n).toLocaleString("zh-CN")}catch{return n}}function y(n){const t=String(n||"").toLowerCase();return t.includes("sora")?"badge-sora2":t.includes("veo")?"badge-veo":t.includes("seedance")?"badge-seedance":"badge-default"}async function C(){c.value=!0;try{const{data:n,error:t}=await u.from("user_videos").select("id,title,model,prompt,video_url,created_at").order("created_at",{ascending:!1}).limit(200);if(t)throw t;a.value=n||[]}finally{c.value=!1}}async function B(){v.value=!0;try{const{data:n,error:t}=await u.from("user_images").select("id,title,model,prompt,image_url,created_at").order("created_at",{ascending:!1}).limit(200);if(t)throw t;r.value=n||[]}finally{v.value=!1}}async function M(n){if(!confirm("确定要删除这条记录吗？"))return;const{error:t}=await u.from("user_videos").delete().eq("id",n);t||(a.value=a.value.filter(o=>o.id!==n))}async function V(n){if(!confirm("确定要删除这条记录吗？"))return;const{error:t}=await u.from("user_images").delete().eq("id",n);t||(r.value=r.value.filter(o=>o.id!==n))}return z(()=>{C(),B()}),(n,t)=>(i(),s("div",S,[e("div",A,[t[16]||(t[16]=f('<header class="storage-header"><div class="storage-header-left"><a href="/" class="btn btn-secondary" style="text-decoration:none;"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回主页 </a><h1>我的存储库</h1></div><div class="header-actions"><a href="/video" class="btn btn-secondary"><svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"></path></svg> 返回生成页 </a></div></header>',1)),e("section",$,[e("div",q,[e("div",D,[t[0]||(t[0]=e("div",{class:"section-title"},[e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})]),d(" 视频生成记录 ")],-1)),e("span",I,l(x.value),1)])]),e("div",F,[c.value?(i(),s("div",T,[...t[1]||(t[1]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("path",{d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})],-1),e("h3",null,"加载中...",-1)])])):a.value.length===0?(i(),s("div",E,[(i(),s("svg",G,[...t[2]||(t[2]=[e("path",{d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"},null,-1)])])),t[3]||(t[3]=e("h3",null,"暂无视频记录",-1)),t[4]||(t[4]=e("p",{style:{"margin-top":"8px"}},"开始生成您的第一个视频吧",-1)),t[5]||(t[5]=e("a",{href:"/video",style:{color:"#6366f1","text-decoration":"none","margin-top":"12px",display:"inline-block","font-weight":"500"}},"去生成视频 →",-1))])):(i(!0),s(_,{key:2},m(a.value,o=>(i(),s("div",{key:o.id,class:"video-card"},[e("div",J,[o.video_url?(i(),s("video",{key:0,src:o.video_url,controls:"",preload:"metadata"},null,8,K)):(i(),s("div",O,"暂无预览"))]),e("div",P,[e("div",Q,l(o.title||"未命名视频"),1),e("div",R,[e("span",{class:w(["badge",y(o.model)])},l(o.model),3),e("span",U,l(p(o.created_at)),1)]),e("div",{class:"video-prompt",title:o.prompt},l(o.prompt),9,W),e("div",X,[o.video_url?(i(),s("a",{key:0,href:o.video_url,download:"",class:"btn btn-secondary btn-sm",style:{"text-decoration":"none",flex:"1","justify-content":"center"}},[...t[6]||(t[6]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),d(" 下载 ",-1)])],8,Y)):k("",!0),e("button",{type:"button",class:"btn btn-secondary btn-sm danger",style:{flex:"1","justify-content":"center"},onClick:H=>M(o.id)},[...t[7]||(t[7]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),d(" 删除 ",-1)])],8,Z)])])]))),128))])]),e("section",ee,[e("div",te,[e("div",oe,[t[8]||(t[8]=f('<div class="section-title"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2"></rect><circle cx="8.5" cy="8.5" r="1.5"></circle><polyline points="21 15 16 10 5 21"></polyline></svg> 图像生成记录 </div>',1)),e("span",se,l(b.value),1)])]),e("div",ie,[v.value?(i(),s("div",ne,[...t[9]||(t[9]=[e("svg",{width:"64",height:"64",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5"},[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"}),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),e("polyline",{points:"21 15 16 10 5 21"})],-1),e("h3",null,"加载中...",-1)])])):r.value.length===0?(i(),s("div",le,[(i(),s("svg",ae,[...t[10]||(t[10]=[e("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2"},null,-1),e("circle",{cx:"8.5",cy:"8.5",r:"1.5"},null,-1),e("polyline",{points:"21 15 16 10 5 21"},null,-1)])])),t[11]||(t[11]=e("h3",null,"暂无图像记录",-1)),t[12]||(t[12]=e("p",{style:{"margin-top":"8px"}},"开始生成您的第一张图片吧",-1)),t[13]||(t[13]=e("a",{href:"/image-generate",style:{color:"#6366f1","text-decoration":"none","margin-top":"12px",display:"inline-block","font-weight":"500"}},"去生成图片 →",-1))])):(i(!0),s(_,{key:2},m(r.value,o=>(i(),s("div",{key:o.id,class:"video-card"},[e("div",re,[o.image_url?(i(),s("img",{key:0,src:o.image_url,alt:"Generated",loading:"lazy",decoding:"async"},null,8,de)):(i(),s("div",ce,"暂无预览"))]),e("div",ve,[e("div",he,l(o.title||"未命名图像"),1),e("div",ue,[e("span",{class:w(["badge",y(o.model)])},l(o.model),3),e("span",pe,l(p(o.created_at)),1)]),e("div",{class:"video-prompt",title:o.prompt},l(o.prompt),9,ye),e("div",ge,[o.image_url?(i(),s("a",{key:0,href:o.image_url,download:"",class:"btn btn-secondary btn-sm",style:{"text-decoration":"none",flex:"1","justify-content":"center"}},[...t[14]||(t[14]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),e("polyline",{points:"7 10 12 15 17 10"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3"})],-1),d(" 下载 ",-1)])],8,fe)):k("",!0),e("button",{type:"button",class:"btn btn-secondary btn-sm danger",style:{flex:"1","justify-content":"center"},onClick:H=>V(o.id)},[...t[15]||(t[15]=[e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"3 6 5 6 21 6"}),e("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})],-1),d(" 删除 ",-1)])],8,_e)])])]))),128))])])])]))}});async function we(){await j(),N(me).mount("#app")}we();
